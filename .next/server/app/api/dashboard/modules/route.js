"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/dashboard/modules/route";
exports.ids = ["app/api/dashboard/modules/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "./action-async-storage.external?8dda":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?3d59":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?16bc":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fmodules%2Froute&page=%2Fapi%2Fdashboard%2Fmodules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fmodules%2Froute.ts&appDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fmodules%2Froute&page=%2Fapi%2Fdashboard%2Fmodules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fmodules%2Froute.ts&appDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_nico_Desktop_gestaoweb_gestaowebprisma_src_app_api_dashboard_modules_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/dashboard/modules/route.ts */ \"(rsc)/./src/app/api/dashboard/modules/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/dashboard/modules/route\",\n        pathname: \"/api/dashboard/modules\",\n        filename: \"route\",\n        bundlePath: \"app/api/dashboard/modules/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\nico\\\\Desktop\\\\gestaoweb\\\\gestaowebprisma\\\\src\\\\app\\\\api\\\\dashboard\\\\modules\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_nico_Desktop_gestaoweb_gestaowebprisma_src_app_api_dashboard_modules_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/dashboard/modules/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkYXNoYm9hcmQlMkZtb2R1bGVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZkYXNoYm9hcmQlMkZtb2R1bGVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZGFzaGJvYXJkJTJGbW9kdWxlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNuaWNvJTVDRGVza3RvcCU1Q2dlc3Rhb3dlYiU1Q2dlc3Rhb3dlYnByaXNtYSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbmljbyU1Q0Rlc2t0b3AlNUNnZXN0YW93ZWIlNUNnZXN0YW93ZWJwcmlzbWEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUQ7QUFDOUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZXN0YW8td2ViLWVycC8/ZTFlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxuaWNvXFxcXERlc2t0b3BcXFxcZ2VzdGFvd2ViXFxcXGdlc3Rhb3dlYnByaXNtYVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxkYXNoYm9hcmRcXFxcbW9kdWxlc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZGFzaGJvYXJkL21vZHVsZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXNoYm9hcmQvbW9kdWxlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZGFzaGJvYXJkL21vZHVsZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxuaWNvXFxcXERlc2t0b3BcXFxcZ2VzdGFvd2ViXFxcXGdlc3Rhb3dlYnByaXNtYVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxkYXNoYm9hcmRcXFxcbW9kdWxlc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9kYXNoYm9hcmQvbW9kdWxlcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fmodules%2Froute&page=%2Fapi%2Fdashboard%2Fmodules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fmodules%2Froute.ts&appDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/dashboard/modules/route.ts":
/*!************************************************!*\
  !*** ./src/app/api/dashboard/modules/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_client_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/client-db */ \"(rsc)/./src/lib/client-db.ts\");\n// src/app/api/dashboard/modules/route.ts\n\n\n\n\n\nasync function GET() {\n    try {\n        // Verificar autenticação\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !session.user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"N\\xe3o autorizado\"\n            }, {\n                status: 401\n            });\n        }\n        const userId = session.user.id;\n        // Obter o usuário do banco principal para verificar a empresa\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                company: true\n            }\n        });\n        if (!user || !user.company) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"Usu\\xe1rio ou empresa n\\xe3o encontrados\"\n            }, {\n                status: 404\n            });\n        }\n        // Obter conexão com o banco de dados do cliente\n        const clientDb = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.getCompanyDbConnection)(userId);\n        // Buscar os módulos do usuário usando a função do client-db.ts\n        const modules = await (0,_lib_client_db__WEBPACK_IMPORTED_MODULE_4__.getUserModules)(clientDb, userId);\n        // Organizar os módulos em uma estrutura hierárquica\n        const moduleMap = new Map();\n        const rootModules = [];\n        // Primeiro passo: mapear todos os módulos por ID\n        modules.forEach((module)=>{\n            moduleMap.set(module.id, {\n                ...module,\n                submodules: []\n            });\n        });\n        // Segundo passo: construir a hierarquia\n        modules.forEach((module)=>{\n            const moduleWithSubs = moduleMap.get(module.id);\n            if (moduleWithSubs) {\n                if (module.parentId && moduleMap.has(module.parentId)) {\n                    // Este é um submódulo, adicionar ao pai\n                    const parent = moduleMap.get(module.parentId);\n                    if (parent) {\n                        parent.submodules.push(moduleWithSubs);\n                    }\n                } else {\n                    // Este é um módulo raiz\n                    rootModules.push(moduleWithSubs);\n                }\n            }\n        });\n        // Ordenar os módulos e submódulos por ordem\n        const sortByOrder = (a, b)=>a.order - b.order;\n        rootModules.sort(sortByOrder);\n        rootModules.forEach((module)=>{\n            module.submodules.sort(sortByOrder);\n        });\n        await clientDb.$disconnect();\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(rootModules);\n    } catch (error) {\n        console.error(\"Erro ao buscar m\\xf3dulos:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9kYXNoYm9hcmQvbW9kdWxlcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEseUNBQXlDO0FBQ0U7QUFDRTtBQUNKO0FBQ2lCO0FBQ1Q7QUFrQjFDLGVBQWVNO0lBQ3BCLElBQUk7UUFDRix5QkFBeUI7UUFDekIsTUFBTUMsVUFBVSxNQUFNTiwyREFBZ0JBLENBQUNDLGtEQUFXQTtRQUVsRCxJQUFJLENBQUNLLFdBQVcsQ0FBQ0EsUUFBUUMsSUFBSSxFQUFFO1lBQzdCLE9BQU9SLGtGQUFZQSxDQUFDUyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO1lBQWlCLEdBQzVCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxTQUFTTCxRQUFRQyxJQUFJLENBQUNLLEVBQUU7UUFFOUIsOERBQThEO1FBQzlELE1BQU1MLE9BQU8sTUFBTUwsMkNBQU1BLENBQUNLLElBQUksQ0FBQ00sVUFBVSxDQUFDO1lBQ3hDQyxPQUFPO2dCQUFFRixJQUFJRDtZQUFPO1lBQ3BCSSxTQUFTO2dCQUFFQyxTQUFTO1lBQUs7UUFDM0I7UUFFQSxJQUFJLENBQUNULFFBQVEsQ0FBQ0EsS0FBS1MsT0FBTyxFQUFFO1lBQzFCLE9BQU9qQixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztZQUFxQyxHQUNoRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsZ0RBQWdEO1FBQ2hELE1BQU1PLFdBQVcsTUFBTWQsK0RBQXNCQSxDQUFDUTtRQUU5QywrREFBK0Q7UUFDL0QsTUFBTU8sVUFBVSxNQUFNZCw4REFBY0EsQ0FBQ2EsVUFBVU47UUFFL0Msb0RBQW9EO1FBQ3BELE1BQU1RLFlBQVksSUFBSUM7UUFDdEIsTUFBTUMsY0FBZ0MsRUFBRTtRQUV4QyxpREFBaUQ7UUFDakRILFFBQVFJLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDZEosVUFBVUssR0FBRyxDQUFDRCxPQUFPWCxFQUFFLEVBQUU7Z0JBQ3ZCLEdBQUdXLE1BQU07Z0JBQ1RFLFlBQVksRUFBRTtZQUNoQjtRQUNGO1FBRUEsd0NBQXdDO1FBQ3hDUCxRQUFRSSxPQUFPLENBQUNDLENBQUFBO1lBQ2QsTUFBTUcsaUJBQWlCUCxVQUFVUSxHQUFHLENBQUNKLE9BQU9YLEVBQUU7WUFFOUMsSUFBSWMsZ0JBQWdCO2dCQUNsQixJQUFJSCxPQUFPSyxRQUFRLElBQUlULFVBQVVVLEdBQUcsQ0FBQ04sT0FBT0ssUUFBUSxHQUFHO29CQUNyRCx3Q0FBd0M7b0JBQ3hDLE1BQU1FLFNBQVNYLFVBQVVRLEdBQUcsQ0FBQ0osT0FBT0ssUUFBUTtvQkFDNUMsSUFBSUUsUUFBUTt3QkFDVkEsT0FBT0wsVUFBVSxDQUFDTSxJQUFJLENBQUNMO29CQUN6QjtnQkFDRixPQUFPO29CQUNMLHdCQUF3QjtvQkFDeEJMLFlBQVlVLElBQUksQ0FBQ0w7Z0JBQ25CO1lBQ0Y7UUFDRjtRQUVBLDRDQUE0QztRQUM1QyxNQUFNTSxjQUFjLENBQUNDLEdBQW1CQyxJQUFzQkQsRUFBRUUsS0FBSyxHQUFHRCxFQUFFQyxLQUFLO1FBQy9FZCxZQUFZZSxJQUFJLENBQUNKO1FBQ2pCWCxZQUFZQyxPQUFPLENBQUNDLENBQUFBO1lBQ2xCQSxPQUFPRSxVQUFVLENBQUNXLElBQUksQ0FBQ0o7UUFDekI7UUFFQSxNQUFNZixTQUFTb0IsV0FBVztRQUUxQixPQUFPdEMsa0ZBQVlBLENBQUNTLElBQUksQ0FBQ2E7SUFDM0IsRUFBRSxPQUFPaUIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQTJCQTtRQUN6QyxPQUFPdkMsa0ZBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsU0FBUztRQUEyQixHQUN0QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dlc3Rhby13ZWItZXJwLy4vc3JjL2FwcC9hcGkvZGFzaGJvYXJkL21vZHVsZXMvcm91dGUudHM/YWY2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL2FwaS9kYXNoYm9hcmQvbW9kdWxlcy9yb3V0ZS50c1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgcHJpc21hLCBnZXRDb21wYW55RGJDb25uZWN0aW9uIH0gZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgZ2V0VXNlck1vZHVsZXMgfSBmcm9tICdAL2xpYi9jbGllbnQtZGInO1xuXG4vLyBEZWZpbmlyIGludGVyZmFjZXMgcGFyYSBvcyB0aXBvc1xuaW50ZXJmYWNlIE1vZHVsZVdpdGhTdWJzIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgaWNvbjogc3RyaW5nIHwgbnVsbDtcbiAgcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgb3JkZXI6IG51bWJlcjtcbiAgcGFyZW50SWQ6IHN0cmluZyB8IG51bGw7XG4gIGNvbXBhbnlJZDogc3RyaW5nO1xuICBhY3RpdmU6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICBzdWJtb2R1bGVzOiBNb2R1bGVXaXRoU3Vic1tdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2HDp8Ojb1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24udXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICdOw6NvIGF1dG9yaXphZG8nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLnVzZXIuaWQgYXMgc3RyaW5nO1xuXG4gICAgLy8gT2J0ZXIgbyB1c3XDoXJpbyBkbyBiYW5jbyBwcmluY2lwYWwgcGFyYSB2ZXJpZmljYXIgYSBlbXByZXNhXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgaW5jbHVkZTogeyBjb21wYW55OiB0cnVlIH1cbiAgICB9KTtcblxuICAgIGlmICghdXNlciB8fCAhdXNlci5jb21wYW55KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ1VzdcOhcmlvIG91IGVtcHJlc2EgbsOjbyBlbmNvbnRyYWRvcycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIE9idGVyIGNvbmV4w6NvIGNvbSBvIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbiAgICBjb25zdCBjbGllbnREYiA9IGF3YWl0IGdldENvbXBhbnlEYkNvbm5lY3Rpb24odXNlcklkKTtcblxuICAgIC8vIEJ1c2NhciBvcyBtw7NkdWxvcyBkbyB1c3XDoXJpbyB1c2FuZG8gYSBmdW7Dp8OjbyBkbyBjbGllbnQtZGIudHNcbiAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgZ2V0VXNlck1vZHVsZXMoY2xpZW50RGIsIHVzZXJJZCk7XG5cbiAgICAvLyBPcmdhbml6YXIgb3MgbcOzZHVsb3MgZW0gdW1hIGVzdHJ1dHVyYSBoaWVyw6FycXVpY2FcbiAgICBjb25zdCBtb2R1bGVNYXAgPSBuZXcgTWFwPHN0cmluZywgTW9kdWxlV2l0aFN1YnM+KCk7XG4gICAgY29uc3Qgcm9vdE1vZHVsZXM6IE1vZHVsZVdpdGhTdWJzW10gPSBbXTtcblxuICAgIC8vIFByaW1laXJvIHBhc3NvOiBtYXBlYXIgdG9kb3Mgb3MgbcOzZHVsb3MgcG9yIElEXG4gICAgbW9kdWxlcy5mb3JFYWNoKG1vZHVsZSA9PiB7XG4gICAgICBtb2R1bGVNYXAuc2V0KG1vZHVsZS5pZCwge1xuICAgICAgICAuLi5tb2R1bGUsXG4gICAgICAgIHN1Ym1vZHVsZXM6IFtdXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFNlZ3VuZG8gcGFzc286IGNvbnN0cnVpciBhIGhpZXJhcnF1aWFcbiAgICBtb2R1bGVzLmZvckVhY2gobW9kdWxlID0+IHtcbiAgICAgIGNvbnN0IG1vZHVsZVdpdGhTdWJzID0gbW9kdWxlTWFwLmdldChtb2R1bGUuaWQpO1xuICAgICAgXG4gICAgICBpZiAobW9kdWxlV2l0aFN1YnMpIHtcbiAgICAgICAgaWYgKG1vZHVsZS5wYXJlbnRJZCAmJiBtb2R1bGVNYXAuaGFzKG1vZHVsZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgICAvLyBFc3RlIMOpIHVtIHN1Ym3Ds2R1bG8sIGFkaWNpb25hciBhbyBwYWlcbiAgICAgICAgICBjb25zdCBwYXJlbnQgPSBtb2R1bGVNYXAuZ2V0KG1vZHVsZS5wYXJlbnRJZCk7XG4gICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50LnN1Ym1vZHVsZXMucHVzaChtb2R1bGVXaXRoU3Vicyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVzdGUgw6kgdW0gbcOzZHVsbyByYWl6XG4gICAgICAgICAgcm9vdE1vZHVsZXMucHVzaChtb2R1bGVXaXRoU3Vicyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE9yZGVuYXIgb3MgbcOzZHVsb3MgZSBzdWJtw7NkdWxvcyBwb3Igb3JkZW1cbiAgICBjb25zdCBzb3J0QnlPcmRlciA9IChhOiBNb2R1bGVXaXRoU3VicywgYjogTW9kdWxlV2l0aFN1YnMpID0+IGEub3JkZXIgLSBiLm9yZGVyO1xuICAgIHJvb3RNb2R1bGVzLnNvcnQoc29ydEJ5T3JkZXIpO1xuICAgIHJvb3RNb2R1bGVzLmZvckVhY2gobW9kdWxlID0+IHtcbiAgICAgIG1vZHVsZS5zdWJtb2R1bGVzLnNvcnQoc29ydEJ5T3JkZXIpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgY2xpZW50RGIuJGRpc2Nvbm5lY3QoKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyb290TW9kdWxlcyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyBidXNjYXIgbcOzZHVsb3M6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiZ2V0Q29tcGFueURiQ29ubmVjdGlvbiIsImdldFVzZXJNb2R1bGVzIiwiR0VUIiwic2Vzc2lvbiIsInVzZXIiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsInVzZXJJZCIsImlkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsImNvbXBhbnkiLCJjbGllbnREYiIsIm1vZHVsZXMiLCJtb2R1bGVNYXAiLCJNYXAiLCJyb290TW9kdWxlcyIsImZvckVhY2giLCJtb2R1bGUiLCJzZXQiLCJzdWJtb2R1bGVzIiwibW9kdWxlV2l0aFN1YnMiLCJnZXQiLCJwYXJlbnRJZCIsImhhcyIsInBhcmVudCIsInB1c2giLCJzb3J0QnlPcmRlciIsImEiLCJiIiwib3JkZXIiLCJzb3J0IiwiJGRpc2Nvbm5lY3QiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/dashboard/modules/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n// src/lib/auth.ts\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Senha\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                try {\n                    // Buscar usuário pelo email\n                    const user = await _db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        },\n                        include: {\n                            company: true\n                        }\n                    });\n                    // Verificar se o usuário existe\n                    if (!user) {\n                        return null;\n                    }\n                    // Verificar se a senha está correta usando bcrypt\n                    const bcrypt = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n                    const passwordMatch = await bcrypt.compare(credentials.password, user.password);\n                    if (!passwordMatch) {\n                        return null;\n                    }\n                    // Verificar se o usuário está ativo\n                    if (!user.active) {\n                        throw new Error(\"Usu\\xe1rio desativado\");\n                    }\n                    // Verificar se a empresa está ativa\n                    if (!user.company.active) {\n                        throw new Error(\"Empresa desativada\");\n                    }\n                    // Retornar dados do usuário\n                    return {\n                        id: user.id,\n                        name: user.name,\n                        email: user.email,\n                        role: user.role,\n                        companyId: user.companyId,\n                        companyName: user.company.name\n                    };\n                } catch (error) {\n                    console.error(\"Erro na autentica\\xe7\\xe3o:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/\",\n        error: \"/\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            // Adicionar dados adicionais ao token\n            if (user) {\n                token.role = user.role;\n                token.companyId = user.companyId;\n                token.companyName = user.companyName;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            // Adicionar dados adicionais à sessão\n            if (session.user) {\n                session.user.id = token.sub;\n                session.user.role = token.role;\n                session.user.companyId = token.companyId;\n                session.user.companyName = token.companyName;\n            }\n            return session;\n        }\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET || \"seu-segredo-temporario\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsa0JBQWtCO0FBRWdEO0FBQ3BDO0FBRXZCLE1BQU1FLGNBQStCO0lBQzFDQyxXQUFXO1FBQ1RILDJFQUFtQkEsQ0FBQztZQUNsQkksTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFNO2dCQUFRO2dCQUN2Q0MsVUFBVTtvQkFBRUYsT0FBTztvQkFBU0MsTUFBTTtnQkFBVztZQUMvQztZQUNBLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxDQUFDRCxhQUFhSSxVQUFVO29CQUNqRCxPQUFPO2dCQUNUO2dCQUVBLElBQUk7b0JBQ0YsNEJBQTRCO29CQUM1QixNQUFNRSxPQUFPLE1BQU1WLHVDQUFNQSxDQUFDVSxJQUFJLENBQUNDLFVBQVUsQ0FBQzt3QkFDeENDLE9BQU87NEJBQUVQLE9BQU9ELFlBQVlDLEtBQUs7d0JBQVc7d0JBQzVDUSxTQUFTOzRCQUFFQyxTQUFTO3dCQUFLO29CQUMzQjtvQkFFQSxnQ0FBZ0M7b0JBQ2hDLElBQUksQ0FBQ0osTUFBTTt3QkFDVCxPQUFPO29CQUNUO29CQUVBLGtEQUFrRDtvQkFDbEQsTUFBTUssU0FBU0MsbUJBQU9BLENBQUM7b0JBQ3ZCLE1BQU1DLGdCQUFnQixNQUFNRixPQUFPRyxPQUFPLENBQUNkLFlBQVlJLFFBQVEsRUFBRUUsS0FBS0YsUUFBUTtvQkFFOUUsSUFBSSxDQUFDUyxlQUFlO3dCQUNsQixPQUFPO29CQUNUO29CQUVBLG9DQUFvQztvQkFDcEMsSUFBSSxDQUFDUCxLQUFLUyxNQUFNLEVBQUU7d0JBQ2hCLE1BQU0sSUFBSUMsTUFBTTtvQkFDbEI7b0JBRUEsb0NBQW9DO29CQUNwQyxJQUFJLENBQUNWLEtBQUtJLE9BQU8sQ0FBQ0ssTUFBTSxFQUFFO3dCQUN4QixNQUFNLElBQUlDLE1BQU07b0JBQ2xCO29CQUVBLDRCQUE0QjtvQkFDNUIsT0FBTzt3QkFDTEMsSUFBSVgsS0FBS1csRUFBRTt3QkFDWGxCLE1BQU1PLEtBQUtQLElBQUk7d0JBQ2ZFLE9BQU9LLEtBQUtMLEtBQUs7d0JBQ2pCaUIsTUFBTVosS0FBS1ksSUFBSTt3QkFDZkMsV0FBV2IsS0FBS2EsU0FBUzt3QkFDekJDLGFBQWFkLEtBQUtJLE9BQU8sQ0FBQ1gsSUFBSTtvQkFDaEM7Z0JBQ0YsRUFBRSxPQUFPc0IsT0FBTztvQkFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUF5QkE7b0JBQ3ZDLE9BQU87Z0JBQ1Q7WUFDRjtRQUNGO0tBQ0Q7SUFDREUsT0FBTztRQUNMQyxRQUFRO1FBQ1JILE9BQU87SUFDVDtJQUNBSSxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVyQixJQUFJLEVBQUU7WUFDdkIsc0NBQXNDO1lBQ3RDLElBQUlBLE1BQU07Z0JBQ1JxQixNQUFNVCxJQUFJLEdBQUdaLEtBQUtZLElBQUk7Z0JBQ3RCUyxNQUFNUixTQUFTLEdBQUdiLEtBQUthLFNBQVM7Z0JBQ2hDUSxNQUFNUCxXQUFXLEdBQUdkLEtBQUtjLFdBQVc7WUFDdEM7WUFDQSxPQUFPTztRQUNUO1FBQ0EsTUFBTUMsU0FBUSxFQUFFQSxPQUFPLEVBQUVELEtBQUssRUFBRTtZQUM5QixzQ0FBc0M7WUFDdEMsSUFBSUMsUUFBUXRCLElBQUksRUFBRTtnQkFDaEJzQixRQUFRdEIsSUFBSSxDQUFDVyxFQUFFLEdBQUdVLE1BQU1FLEdBQUc7Z0JBQzNCRCxRQUFRdEIsSUFBSSxDQUFDWSxJQUFJLEdBQUdTLE1BQU1ULElBQUk7Z0JBQzlCVSxRQUFRdEIsSUFBSSxDQUFDYSxTQUFTLEdBQUdRLE1BQU1SLFNBQVM7Z0JBQ3hDUyxRQUFRdEIsSUFBSSxDQUFDYyxXQUFXLEdBQUdPLE1BQU1QLFdBQVc7WUFDOUM7WUFDQSxPQUFPUTtRQUNUO0lBQ0Y7SUFDQUEsU0FBUztRQUNQRSxVQUFVO1FBQ1ZDLFFBQVEsS0FBSyxLQUFLO0lBQ3BCO0lBQ0FDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJO0FBQ3pDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZXN0YW8td2ViLWVycC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvYXV0aC50c1xuaW1wb3J0IHR5cGUgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4vZGInO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiAnQ3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlNlbmhhXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQnVzY2FyIHVzdcOhcmlvIHBlbG8gZW1haWxcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgYXMgc3RyaW5nIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiB7IGNvbXBhbnk6IHRydWUgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBvIHVzdcOhcmlvIGV4aXN0ZVxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBhIHNlbmhhIGVzdMOhIGNvcnJldGEgdXNhbmRvIGJjcnlwdFxuICAgICAgICAgIGNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xuICAgICAgICAgIGNvbnN0IHBhc3N3b3JkTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFwYXNzd29yZE1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyBlc3TDoSBhdGl2b1xuICAgICAgICAgIGlmICghdXNlci5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXN1w6FyaW8gZGVzYXRpdmFkbycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBhIGVtcHJlc2EgZXN0w6EgYXRpdmFcbiAgICAgICAgICBpZiAoIXVzZXIuY29tcGFueS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW1wcmVzYSBkZXNhdGl2YWRhJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmV0b3JuYXIgZGFkb3MgZG8gdXN1w6FyaW9cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICAgIGNvbXBhbnlJZDogdXNlci5jb21wYW55SWQsXG4gICAgICAgICAgICBjb21wYW55TmFtZTogdXNlci5jb21wYW55Lm5hbWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIG5hIGF1dGVudGljYcOnw6NvOicsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnLycsXG4gICAgZXJyb3I6ICcvJyxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgLy8gQWRpY2lvbmFyIGRhZG9zIGFkaWNpb25haXMgYW8gdG9rZW5cbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICAgIHRva2VuLmNvbXBhbnlJZCA9IHVzZXIuY29tcGFueUlkO1xuICAgICAgICB0b2tlbi5jb21wYW55TmFtZSA9IHVzZXIuY29tcGFueU5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgLy8gQWRpY2lvbmFyIGRhZG9zIGFkaWNpb25haXMgw6Agc2Vzc8Ojb1xuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5zdWIgYXMgc3RyaW5nO1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nO1xuICAgICAgICBzZXNzaW9uLnVzZXIuY29tcGFueUlkID0gdG9rZW4uY29tcGFueUlkIGFzIHN0cmluZztcbiAgICAgICAgc2Vzc2lvbi51c2VyLmNvbXBhbnlOYW1lID0gdG9rZW4uY29tcGFueU5hbWUgYXMgc3RyaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICAgIG1heEFnZTogMjQgKiA2MCAqIDYwLCAvLyAyNCBob3Jhc1xuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCB8fCAnc2V1LXNlZ3JlZG8tdGVtcG9yYXJpbycsXG59Il0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsImNvbXBhbnkiLCJiY3J5cHQiLCJyZXF1aXJlIiwicGFzc3dvcmRNYXRjaCIsImNvbXBhcmUiLCJhY3RpdmUiLCJFcnJvciIsImlkIiwicm9sZSIsImNvbXBhbnlJZCIsImNvbXBhbnlOYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInNlc3Npb24iLCJzdWIiLCJzdHJhdGVneSIsIm1heEFnZSIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/client-db.ts":
/*!******************************!*\
  !*** ./src/lib/client-db.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkUserPermission: () => (/* binding */ checkUserPermission),\n/* harmony export */   executeClientQuery: () => (/* binding */ executeClientQuery),\n/* harmony export */   getUserModules: () => (/* binding */ getUserModules),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile)\n/* harmony export */ });\n// Função para executar consultas SQL no banco de dados do cliente\nasync function executeClientQuery(clientDb, query, params = []) {\n    try {\n        // Usar $queryRawUnsafe para executar consultas SQL parametrizadas\n        return await clientDb.$queryRawUnsafe(query, ...params);\n    } catch (error) {\n        console.error(\"Erro ao executar consulta no banco do cliente:\", error);\n        throw error;\n    }\n}\n// Função para obter módulos do menu para um usuário\nasync function getUserModules(clientDb, userId) {\n    try {\n        // Primeiro, verificar se as tabelas existem\n        const tableCheck = await clientDb.$queryRaw`\n      SELECT EXISTS (\n        SELECT FROM information_schema.tables \n        WHERE table_schema = 'public' \n        AND table_name = 'Module'\n      ) as module_exists\n    `;\n        if (!tableCheck[0].module_exists) {\n            console.error(\"Tabela Module n\\xe3o existe no banco de dados\");\n            return [];\n        }\n        // Verificar se o usuário tem um perfil associado\n        const user = await clientDb.$queryRaw`\n      SELECT * FROM \"ClientUser\" WHERE \"mainId\" = ${userId}\n    `;\n        if (user.length === 0) {\n            console.error(\"Usu\\xe1rio n\\xe3o encontrado no banco de dados do cliente\");\n            return [];\n        }\n        let modules = [];\n        if (!user[0].profileId) {\n            console.log(\"Usu\\xe1rio n\\xe3o tem perfil associado\");\n            // Se o usuário não tem perfil, mas é admin, retornar todos os módulos\n            if (user[0].role === \"admin\") {\n                modules = await clientDb.$queryRaw`\n          SELECT * FROM \"Module\" \n          WHERE \"active\" = true \n          ORDER BY \"order\" ASC\n        `;\n            } else {\n                return [];\n            }\n        } else {\n            // Buscar módulos com base no perfil do usuário\n            modules = await clientDb.$queryRaw`\n        SELECT m.*\n        FROM \"Module\" m\n        JOIN \"Permission\" p ON p.\"moduleId\" = m.\"id\"\n        WHERE p.\"profileId\" = ${user[0].profileId}::uuid\n          AND p.\"canView\" = true\n          AND m.\"active\" = true\n        ORDER BY m.\"order\" ASC\n      `;\n        }\n        // Para cada módulo, buscar seus menus\n        const modulesWithMenus = [];\n        for (const module of modules){\n            // Buscar menus do módulo\n            const menus = await clientDb.$queryRaw`\n        SELECT * FROM \"Menu\"\n        WHERE \"moduleId\" = ${module.id}::uuid\n          AND \"active\" = true\n        ORDER BY \"order\" ASC\n      `;\n            // Adicionar permissões aos menus\n            const menusWithPermissions = menus.map((menu)=>({\n                    ...menu,\n                    permissions: {\n                        canView: true,\n                        canCreate: true,\n                        canEdit: true,\n                        canDelete: true\n                    }\n                }));\n            // Adicionar menus ao módulo\n            modulesWithMenus.push({\n                ...module,\n                menus: menusWithPermissions\n            });\n        }\n        return modulesWithMenus;\n    } catch (error) {\n        console.error(\"Erro ao obter m\\xf3dulos do usu\\xe1rio:\", error);\n        return [];\n    }\n}\n// Função para obter perfil do usuário\nasync function getUserProfile(clientDb, userId) {\n    try {\n        const query = `\n      SELECT u.*, p.*\n      FROM \"ClientUser\" u\n      LEFT JOIN \"Profile\" p ON u.\"profileId\" = p.\"id\"\n      WHERE u.\"mainId\" = $1\n    `;\n        const results = await clientDb.$queryRawUnsafe(query, userId);\n        if (results.length === 0) return null;\n        // Processar o resultado para formar o objeto esperado\n        const result = results[0];\n        return {\n            id: result.id,\n            name: result.name,\n            email: result.email,\n            mainId: result.mainId,\n            companyId: result.companyId,\n            profileId: result.profileId,\n            role: result.role,\n            active: result.active,\n            createdAt: result.createdAt,\n            updatedAt: result.updatedAt,\n            profile: result.profileId ? {\n                id: result.profile_id,\n                name: result.profile_name,\n                description: result.profile_description,\n                companyId: result.profile_companyId,\n                active: result.profile_active,\n                createdAt: result.profile_createdAt,\n                updatedAt: result.profile_updatedAt\n            } : null\n        };\n    } catch (error) {\n        console.error(\"Erro ao obter perfil do usu\\xe1rio:\", error);\n        return null;\n    }\n}\n// Função para verificar permissão do usuário em um módulo\nasync function checkUserPermission(clientDb, userId, modulePath, permission) {\n    try {\n        const query = `\n      SELECT p.\"${permission}\" as hasPermission\n      FROM \"Permission\" p\n      JOIN \"Module\" m ON p.\"moduleId\" = m.\"id\"\n      JOIN \"Profile\" pr ON p.\"profileId\" = pr.\"id\"\n      JOIN \"ClientUser\" u ON u.\"profileId\" = pr.\"id\"\n      WHERE u.\"mainId\" = $1\n        AND m.\"path\" = $2\n      LIMIT 1\n    `;\n        const results = await clientDb.$queryRawUnsafe(query, userId, modulePath);\n        return results.length > 0 ? results[0].hasPermission : false;\n    } catch (error) {\n        console.error(\"Erro ao verificar permiss\\xe3o do usu\\xe1rio:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU07WUFDckJDLFdBQVdKLE9BQU9JLFNBQVM7WUFDM0J0QixXQUFXa0IsT0FBT2xCLFNBQVM7WUFDM0JFLE1BQU1nQixPQUFPaEIsSUFBSTtZQUNqQnFCLFFBQVFMLE9BQU9LLE1BQU07WUFDckJDLFdBQVdOLE9BQU9NLFNBQVM7WUFDM0JDLFdBQVdQLE9BQU9PLFNBQVM7WUFDM0JDLFNBQVNSLE9BQU9sQixTQUFTLEdBQUc7Z0JBQzFCTSxJQUFJWSxPQUFPUyxVQUFVO2dCQUNyQlIsTUFBTUQsT0FBT1UsWUFBWTtnQkFDekJDLGFBQWFYLE9BQU9ZLG1CQUFtQjtnQkFDdkNSLFdBQVdKLE9BQU9hLGlCQUFpQjtnQkFDbkNSLFFBQVFMLE9BQU9jLGNBQWM7Z0JBQzdCUixXQUFXTixPQUFPZSxpQkFBaUI7Z0JBQ25DUixXQUFXUCxPQUFPZ0IsaUJBQWlCO1lBQ3JDLElBQUk7UUFDTjtJQUNGLEVBQUUsT0FBTzVDLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUFvQ0E7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSwwREFBMEQ7QUFDbkQsZUFBZTZDLG9CQUNwQmpELFFBQXNCLEVBQ3RCTyxNQUFjLEVBQ2QyQyxVQUFrQixFQUNsQkMsVUFBNkQ7SUFFN0QsSUFBSTtRQUNGLE1BQU1sRCxRQUFRLENBQUM7Z0JBQ0gsRUFBRWtELFdBQVc7Ozs7Ozs7O0lBUXpCLENBQUM7UUFFRCxNQUFNcEIsVUFBVSxNQUFNL0IsU0FBU0csZUFBZSxDQUFDRixPQUFPTSxRQUFRMkM7UUFDOUQsT0FBT25CLFFBQVFuQixNQUFNLEdBQUcsSUFBSW1CLE9BQU8sQ0FBQyxFQUFFLENBQUNxQixhQUFhLEdBQUc7SUFDekQsRUFBRSxPQUFPaEQsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaURBQTJDQTtRQUN6RCxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dlc3Rhby13ZWItZXJwLy4vc3JjL2xpYi9jbGllbnQtZGIudHM/NDc5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIEludGVyZmFjZXMgcGFyYSBvcyB0aXBvcyBkZSByZXRvcm5vIGRhcyBjb25zdWx0YXNcbmludGVyZmFjZSBDbGllbnRDb21wYW55IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBtYWluSWQ6IHN0cmluZztcbiAgYWN0aXZlOiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuaW50ZXJmYWNlIENsaWVudFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG1haW5JZDogc3RyaW5nO1xuICBjb21wYW55SWQ6IHN0cmluZztcbiAgcHJvZmlsZUlkOiBzdHJpbmcgfCBudWxsO1xuICByb2xlOiBzdHJpbmc7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBQcm9maWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgY29tcGFueUlkOiBzdHJpbmc7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBNb2R1bGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBpY29uOiBzdHJpbmcgfCBudWxsO1xuICBwYXRoOiBzdHJpbmcgfCBudWxsO1xuICBvcmRlcjogbnVtYmVyO1xuICBwYXJlbnRJZDogc3RyaW5nIHwgbnVsbDtcbiAgY29tcGFueUlkOiBzdHJpbmc7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBQZXJtaXNzaW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgcHJvZmlsZUlkOiBzdHJpbmc7XG4gIG1vZHVsZUlkOiBzdHJpbmc7XG4gIGNhblZpZXc6IGJvb2xlYW47XG4gIGNhbkNyZWF0ZTogYm9vbGVhbjtcbiAgY2FuRWRpdDogYm9vbGVhbjtcbiAgY2FuRGVsZXRlOiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuLy8gRnVuw6fDo28gcGFyYSBleGVjdXRhciBjb25zdWx0YXMgU1FMIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ2xpZW50UXVlcnk8VD4oY2xpZW50RGI6IFByaXNtYUNsaWVudCwgcXVlcnk6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTxUW10+IHtcbiAgdHJ5IHtcbiAgICAvLyBVc2FyICRxdWVyeVJhd1Vuc2FmZSBwYXJhIGV4ZWN1dGFyIGNvbnN1bHRhcyBTUUwgcGFyYW1ldHJpemFkYXNcbiAgICByZXR1cm4gYXdhaXQgY2xpZW50RGIuJHF1ZXJ5UmF3VW5zYWZlKHF1ZXJ5LCAuLi5wYXJhbXMpIGFzIFRbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGV4ZWN1dGFyIGNvbnN1bHRhIG5vIGJhbmNvIGRvIGNsaWVudGU6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgb2J0ZXIgbcOzZHVsb3MgZG8gbWVudSBwYXJhIHVtIHVzdcOhcmlvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlck1vZHVsZXMoY2xpZW50RGI6IFByaXNtYUNsaWVudCwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPE1vZHVsZVtdPiB7XG4gIHRyeSB7XG4gICAgLy8gUHJpbWVpcm8sIHZlcmlmaWNhciBzZSBhcyB0YWJlbGFzIGV4aXN0ZW1cbiAgICBjb25zdCB0YWJsZUNoZWNrID0gYXdhaXQgY2xpZW50RGIuJHF1ZXJ5UmF3PGFueVtdPmBcbiAgICAgIFNFTEVDVCBFWElTVFMgKFxuICAgICAgICBTRUxFQ1QgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIFxuICAgICAgICBXSEVSRSB0YWJsZV9zY2hlbWEgPSAncHVibGljJyBcbiAgICAgICAgQU5EIHRhYmxlX25hbWUgPSAnTW9kdWxlJ1xuICAgICAgKSBhcyBtb2R1bGVfZXhpc3RzXG4gICAgYDtcbiAgICBcbiAgICBpZiAoIXRhYmxlQ2hlY2tbMF0ubW9kdWxlX2V4aXN0cykge1xuICAgICAgY29uc29sZS5lcnJvcignVGFiZWxhIE1vZHVsZSBuw6NvIGV4aXN0ZSBubyBiYW5jbyBkZSBkYWRvcycpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyB0ZW0gdW0gcGVyZmlsIGFzc29jaWFkb1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjbGllbnREYi4kcXVlcnlSYXc8YW55W10+YFxuICAgICAgU0VMRUNUICogRlJPTSBcIkNsaWVudFVzZXJcIiBXSEVSRSBcIm1haW5JZFwiID0gJHt1c2VySWR9XG4gICAgYDtcbiAgICBcbiAgICBpZiAodXNlci5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbyBubyBiYW5jbyBkZSBkYWRvcyBkbyBjbGllbnRlJyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGxldCBtb2R1bGVzID0gW107XG4gICAgXG4gICAgaWYgKCF1c2VyWzBdLnByb2ZpbGVJZCkge1xuICAgICAgY29uc29sZS5sb2coJ1VzdcOhcmlvIG7Do28gdGVtIHBlcmZpbCBhc3NvY2lhZG8nKTtcbiAgICAgIC8vIFNlIG8gdXN1w6FyaW8gbsOjbyB0ZW0gcGVyZmlsLCBtYXMgw6kgYWRtaW4sIHJldG9ybmFyIHRvZG9zIG9zIG3Ds2R1bG9zXG4gICAgICBpZiAodXNlclswXS5yb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAgIG1vZHVsZXMgPSBhd2FpdCBjbGllbnREYi4kcXVlcnlSYXdgXG4gICAgICAgICAgU0VMRUNUICogRlJPTSBcIk1vZHVsZVwiIFxuICAgICAgICAgIFdIRVJFIFwiYWN0aXZlXCIgPSB0cnVlIFxuICAgICAgICAgIE9SREVSIEJZIFwib3JkZXJcIiBBU0NcbiAgICAgICAgYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQnVzY2FyIG3Ds2R1bG9zIGNvbSBiYXNlIG5vIHBlcmZpbCBkbyB1c3XDoXJpb1xuICAgICAgbW9kdWxlcyA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhd2BcbiAgICAgICAgU0VMRUNUIG0uKlxuICAgICAgICBGUk9NIFwiTW9kdWxlXCIgbVxuICAgICAgICBKT0lOIFwiUGVybWlzc2lvblwiIHAgT04gcC5cIm1vZHVsZUlkXCIgPSBtLlwiaWRcIlxuICAgICAgICBXSEVSRSBwLlwicHJvZmlsZUlkXCIgPSAke3VzZXJbMF0ucHJvZmlsZUlkfTo6dXVpZFxuICAgICAgICAgIEFORCBwLlwiY2FuVmlld1wiID0gdHJ1ZVxuICAgICAgICAgIEFORCBtLlwiYWN0aXZlXCIgPSB0cnVlXG4gICAgICAgIE9SREVSIEJZIG0uXCJvcmRlclwiIEFTQ1xuICAgICAgYDtcbiAgICB9XG4gICAgXG4gICAgLy8gUGFyYSBjYWRhIG3Ds2R1bG8sIGJ1c2NhciBzZXVzIG1lbnVzXG4gICAgY29uc3QgbW9kdWxlc1dpdGhNZW51cyA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgbW9kdWxlIG9mIG1vZHVsZXMpIHtcbiAgICAgIC8vIEJ1c2NhciBtZW51cyBkbyBtw7NkdWxvXG4gICAgICBjb25zdCBtZW51cyA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhd2BcbiAgICAgICAgU0VMRUNUICogRlJPTSBcIk1lbnVcIlxuICAgICAgICBXSEVSRSBcIm1vZHVsZUlkXCIgPSAke21vZHVsZS5pZH06OnV1aWRcbiAgICAgICAgICBBTkQgXCJhY3RpdmVcIiA9IHRydWVcbiAgICAgICAgT1JERVIgQlkgXCJvcmRlclwiIEFTQ1xuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gQWRpY2lvbmFyIHBlcm1pc3PDtWVzIGFvcyBtZW51c1xuICAgICAgY29uc3QgbWVudXNXaXRoUGVybWlzc2lvbnMgPSBtZW51cy5tYXAobWVudSA9PiAoe1xuICAgICAgICAuLi5tZW51LFxuICAgICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICAgIGNhblZpZXc6IHRydWUsXG4gICAgICAgICAgY2FuQ3JlYXRlOiB0cnVlLFxuICAgICAgICAgIGNhbkVkaXQ6IHRydWUsXG4gICAgICAgICAgY2FuRGVsZXRlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gQWRpY2lvbmFyIG1lbnVzIGFvIG3Ds2R1bG9cbiAgICAgIG1vZHVsZXNXaXRoTWVudXMucHVzaCh7XG4gICAgICAgIC4uLm1vZHVsZSxcbiAgICAgICAgbWVudXM6IG1lbnVzV2l0aFBlcm1pc3Npb25zXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG1vZHVsZXNXaXRoTWVudXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyBvYnRlciBtw7NkdWxvcyBkbyB1c3XDoXJpbzonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgb2J0ZXIgcGVyZmlsIGRvIHVzdcOhcmlvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUoY2xpZW50RGI6IFByaXNtYUNsaWVudCwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPChDbGllbnRVc2VyICYgeyBwcm9maWxlOiBQcm9maWxlIHwgbnVsbCB9KSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgIFNFTEVDVCB1LiosIHAuKlxuICAgICAgRlJPTSBcIkNsaWVudFVzZXJcIiB1XG4gICAgICBMRUZUIEpPSU4gXCJQcm9maWxlXCIgcCBPTiB1LlwicHJvZmlsZUlkXCIgPSBwLlwiaWRcIlxuICAgICAgV0hFUkUgdS5cIm1haW5JZFwiID0gJDFcbiAgICBgO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBjbGllbnREYi4kcXVlcnlSYXdVbnNhZmUocXVlcnksIHVzZXJJZCkgYXMgYW55W107XG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBQcm9jZXNzYXIgbyByZXN1bHRhZG8gcGFyYSBmb3JtYXIgbyBvYmpldG8gZXNwZXJhZG9cbiAgICBjb25zdCByZXN1bHQgPSByZXN1bHRzWzBdO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcmVzdWx0LmlkLFxuICAgICAgbmFtZTogcmVzdWx0Lm5hbWUsXG4gICAgICBlbWFpbDogcmVzdWx0LmVtYWlsLFxuICAgICAgbWFpbklkOiByZXN1bHQubWFpbklkLFxuICAgICAgY29tcGFueUlkOiByZXN1bHQuY29tcGFueUlkLFxuICAgICAgcHJvZmlsZUlkOiByZXN1bHQucHJvZmlsZUlkLFxuICAgICAgcm9sZTogcmVzdWx0LnJvbGUsXG4gICAgICBhY3RpdmU6IHJlc3VsdC5hY3RpdmUsXG4gICAgICBjcmVhdGVkQXQ6IHJlc3VsdC5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHJlc3VsdC51cGRhdGVkQXQsXG4gICAgICBwcm9maWxlOiByZXN1bHQucHJvZmlsZUlkID8ge1xuICAgICAgICBpZDogcmVzdWx0LnByb2ZpbGVfaWQsXG4gICAgICAgIG5hbWU6IHJlc3VsdC5wcm9maWxlX25hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZXN1bHQucHJvZmlsZV9kZXNjcmlwdGlvbixcbiAgICAgICAgY29tcGFueUlkOiByZXN1bHQucHJvZmlsZV9jb21wYW55SWQsXG4gICAgICAgIGFjdGl2ZTogcmVzdWx0LnByb2ZpbGVfYWN0aXZlLFxuICAgICAgICBjcmVhdGVkQXQ6IHJlc3VsdC5wcm9maWxlX2NyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiByZXN1bHQucHJvZmlsZV91cGRhdGVkQXRcbiAgICAgIH0gOiBudWxsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIG9idGVyIHBlcmZpbCBkbyB1c3XDoXJpbzonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSB2ZXJpZmljYXIgcGVybWlzc8OjbyBkbyB1c3XDoXJpbyBlbSB1bSBtw7NkdWxvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tVc2VyUGVybWlzc2lvbihcbiAgY2xpZW50RGI6IFByaXNtYUNsaWVudCwgXG4gIHVzZXJJZDogc3RyaW5nLCBcbiAgbW9kdWxlUGF0aDogc3RyaW5nLCBcbiAgcGVybWlzc2lvbjogJ2NhblZpZXcnIHwgJ2NhbkNyZWF0ZScgfCAnY2FuRWRpdCcgfCAnY2FuRGVsZXRlJ1xuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgcC5cIiR7cGVybWlzc2lvbn1cIiBhcyBoYXNQZXJtaXNzaW9uXG4gICAgICBGUk9NIFwiUGVybWlzc2lvblwiIHBcbiAgICAgIEpPSU4gXCJNb2R1bGVcIiBtIE9OIHAuXCJtb2R1bGVJZFwiID0gbS5cImlkXCJcbiAgICAgIEpPSU4gXCJQcm9maWxlXCIgcHIgT04gcC5cInByb2ZpbGVJZFwiID0gcHIuXCJpZFwiXG4gICAgICBKT0lOIFwiQ2xpZW50VXNlclwiIHUgT04gdS5cInByb2ZpbGVJZFwiID0gcHIuXCJpZFwiXG4gICAgICBXSEVSRSB1LlwibWFpbklkXCIgPSAkMVxuICAgICAgICBBTkQgbS5cInBhdGhcIiA9ICQyXG4gICAgICBMSU1JVCAxXG4gICAgYDtcbiAgICBcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgY2xpZW50RGIuJHF1ZXJ5UmF3VW5zYWZlKHF1ZXJ5LCB1c2VySWQsIG1vZHVsZVBhdGgpIGFzIEFycmF5PHtoYXNQZXJtaXNzaW9uOiBib29sZWFufT47XG4gICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF0uaGFzUGVybWlzc2lvbiA6IGZhbHNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gdmVyaWZpY2FyIHBlcm1pc3PDo28gZG8gdXN1w6FyaW86JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSJdLCJuYW1lcyI6WyJleGVjdXRlQ2xpZW50UXVlcnkiLCJjbGllbnREYiIsInF1ZXJ5IiwicGFyYW1zIiwiJHF1ZXJ5UmF3VW5zYWZlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlck1vZHVsZXMiLCJ1c2VySWQiLCJ0YWJsZUNoZWNrIiwiJHF1ZXJ5UmF3IiwibW9kdWxlX2V4aXN0cyIsInVzZXIiLCJsZW5ndGgiLCJtb2R1bGVzIiwicHJvZmlsZUlkIiwibG9nIiwicm9sZSIsIm1vZHVsZXNXaXRoTWVudXMiLCJtb2R1bGUiLCJtZW51cyIsImlkIiwibWVudXNXaXRoUGVybWlzc2lvbnMiLCJtYXAiLCJtZW51IiwicGVybWlzc2lvbnMiLCJjYW5WaWV3IiwiY2FuQ3JlYXRlIiwiY2FuRWRpdCIsImNhbkRlbGV0ZSIsInB1c2giLCJnZXRVc2VyUHJvZmlsZSIsInJlc3VsdHMiLCJyZXN1bHQiLCJuYW1lIiwiZW1haWwiLCJtYWluSWQiLCJjb21wYW55SWQiLCJhY3RpdmUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJwcm9maWxlIiwicHJvZmlsZV9pZCIsInByb2ZpbGVfbmFtZSIsImRlc2NyaXB0aW9uIiwicHJvZmlsZV9kZXNjcmlwdGlvbiIsInByb2ZpbGVfY29tcGFueUlkIiwicHJvZmlsZV9hY3RpdmUiLCJwcm9maWxlX2NyZWF0ZWRBdCIsInByb2ZpbGVfdXBkYXRlZEF0IiwiY2hlY2tVc2VyUGVybWlzc2lvbiIsIm1vZHVsZVBhdGgiLCJwZXJtaXNzaW9uIiwiaGFzUGVybWlzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/client-db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildClientDatabaseUrl: () => (/* binding */ buildClientDatabaseUrl),\n/* harmony export */   createCompany: () => (/* binding */ createCompany),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   getClientPrisma: () => (/* binding */ getClientPrisma),\n/* harmony export */   getCompanyDbConnection: () => (/* binding */ getCompanyDbConnection),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst execAsync = (0,util__WEBPACK_IMPORTED_MODULE_2__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_1__.exec);\n// Cliente Prisma para o banco de dados principal\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n// Função para criar um cliente Prisma para o banco de dados específico de uma empresa\nfunction getClientPrisma(databaseUrl) {\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n        datasources: {\n            db: {\n                url: databaseUrl\n            }\n        }\n    });\n}\n// Função para construir a URL de conexão do banco de dados do cliente\nfunction buildClientDatabaseUrl(company) {\n    // Codificar a senha para lidar com caracteres especiais\n    const encodedPass = encodeURIComponent(company.databasePass);\n    return `postgresql://${company.databaseUser}:${encodedPass}@${company.databaseHost}:${company.databasePort}/${company.databaseName}`;\n}\n// Função para obter conexão com o banco de dados da empresa do usuário\nasync function getCompanyDbConnection(userId) {\n    // Buscar usuário e empresa associada\n    const user = await prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        include: {\n            company: true\n        }\n    });\n    if (!user || !user.company) {\n        throw new Error(\"Usu\\xe1rio ou empresa n\\xe3o encontrados\");\n    }\n    // Construir URL de conexão\n    const dbUrl = buildClientDatabaseUrl(user.company);\n    // Criar e retornar cliente Prisma para o banco de dados da empresa\n    return getClientPrisma(dbUrl);\n}\n// Função para criar uma nova empresa\nasync function createCompany({ name, databaseName, databaseHost = \"localhost\", databasePort = 5432, databaseUser = \"postgres\", databasePass }) {\n    try {\n        // Criar a empresa no banco de dados principal\n        const company = await prisma.company.create({\n            data: {\n                name,\n                databaseName,\n                databaseHost,\n                databasePort,\n                databaseUser,\n                databasePass\n            }\n        });\n        try {\n            // Conectar ao PostgreSQL e criar o banco de dados\n            // Usar credenciais do .env se disponíveis, caso contrário usar as fornecidas\n            const pgUser = process.env.POSTGRES_USER || databaseUser;\n            const pgPass = process.env.POSTGRES_PASSWORD || databasePass;\n            const pgHost = process.env.POSTGRES_HOST || databaseHost;\n            const pgPort = process.env.POSTGRES_PORT ? parseInt(process.env.POSTGRES_PORT) : databasePort;\n            console.log(`Tentando conectar ao PostgreSQL como ${pgUser}@${pgHost}:${pgPort}`);\n            // Codificar a senha para lidar com caracteres especiais\n            const encodedPass = encodeURIComponent(pgPass);\n            const pgUrl = `postgresql://${pgUser}:${encodedPass}@${pgHost}:${pgPort}/postgres`;\n            const createDbCommand = `CREATE DATABASE \"${databaseName}\"`;\n            // Usar o cliente pg para executar o comando SQL\n            const { Pool } = __webpack_require__(/*! pg */ \"pg\");\n            const pool = new Pool({\n                connectionString: pgUrl\n            });\n            await pool.query(createDbCommand);\n            await pool.end();\n            // Inicializar o esquema do banco de dados do cliente\n            const clientDbUrl = buildClientDatabaseUrl({\n                databaseHost,\n                databasePort,\n                databaseUser,\n                databasePass,\n                databaseName\n            });\n            // Criar as tabelas no banco de dados do cliente usando um script SQL\n            const clientDb = getClientPrisma(clientDbUrl);\n            // Criar as tabelas no banco de dados do cliente uma por uma\n            // Tabela ClientCompany\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"ClientCompany\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"name\" TEXT NOT NULL,\n          \"mainId\" TEXT UNIQUE NOT NULL,\n          \"active\" BOOLEAN NOT NULL DEFAULT true,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL\n        )\n      `;\n            // Tabela ClientUser\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"ClientUser\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"name\" TEXT NOT NULL,\n          \"email\" TEXT UNIQUE NOT NULL,\n          \"mainId\" TEXT UNIQUE NOT NULL,\n          \"companyId\" UUID NOT NULL,\n          \"profileId\" UUID,\n          \"role\" TEXT NOT NULL DEFAULT 'user',\n          \"active\" BOOLEAN NOT NULL DEFAULT true,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL,\n          FOREIGN KEY (\"companyId\") REFERENCES \"ClientCompany\"(\"id\")\n        )\n      `;\n            // Tabela Profile\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"Profile\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"name\" TEXT NOT NULL,\n          \"description\" TEXT,\n          \"companyId\" UUID NOT NULL,\n          \"active\" BOOLEAN NOT NULL DEFAULT true,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL,\n          FOREIGN KEY (\"companyId\") REFERENCES \"ClientCompany\"(\"id\")\n        )\n      `;\n            // Tabela Module\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"Module\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"name\" TEXT NOT NULL,\n          \"description\" TEXT,\n          \"icon\" TEXT,\n          \"path\" TEXT,\n          \"order\" INTEGER NOT NULL DEFAULT 0,\n          \"parentId\" UUID,\n          \"companyId\" UUID NOT NULL,\n          \"active\" BOOLEAN NOT NULL DEFAULT true,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL,\n          FOREIGN KEY (\"companyId\") REFERENCES \"ClientCompany\"(\"id\")\n        )\n      `;\n            // Adicionar chave estrangeira para parentId após a tabela Module ser criada\n            await clientDb.$executeRaw`\n        ALTER TABLE \"Module\" ADD FOREIGN KEY (\"parentId\") REFERENCES \"Module\"(\"id\")\n      `;\n            // Tabela Menu\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"Menu\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"name\" TEXT NOT NULL,\n          \"description\" TEXT,\n          \"path\" TEXT NOT NULL,\n          \"icon\" TEXT,\n          \"moduleId\" UUID NOT NULL,\n          \"parentId\" UUID,\n          \"order\" INTEGER NOT NULL DEFAULT 0,\n          \"active\" BOOLEAN NOT NULL DEFAULT true,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL,\n          FOREIGN KEY (\"moduleId\") REFERENCES \"Module\"(\"id\"),\n          FOREIGN KEY (\"parentId\") REFERENCES \"Menu\"(\"id\")\n        )\n      `;\n            // Tabela Permission\n            await clientDb.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"Permission\" (\n          \"id\" UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n          \"profileId\" UUID NOT NULL,\n          \"moduleId\" UUID NOT NULL,\n          \"canView\" BOOLEAN NOT NULL DEFAULT false,\n          \"canCreate\" BOOLEAN NOT NULL DEFAULT false,\n          \"canEdit\" BOOLEAN NOT NULL DEFAULT false,\n          \"canDelete\" BOOLEAN NOT NULL DEFAULT false,\n          \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n          \"updatedAt\" TIMESTAMP(3) NOT NULL,\n          FOREIGN KEY (\"profileId\") REFERENCES \"Profile\"(\"id\"),\n          FOREIGN KEY (\"moduleId\") REFERENCES \"Module\"(\"id\"),\n          UNIQUE (\"profileId\", \"moduleId\")\n        )\n      `;\n            // Adicionar chave estrangeira para profileId em ClientUser\n            await clientDb.$executeRaw`\n        ALTER TABLE \"ClientUser\" ADD FOREIGN KEY (\"profileId\") REFERENCES \"Profile\"(\"id\")\n      `;\n            // Inserir a empresa no banco de dados do cliente usando SQL puro\n            const clientCompanyResult = await clientDb.$queryRaw`\n        INSERT INTO \"ClientCompany\" (\"name\", \"mainId\", \"updatedAt\")\n        VALUES (${company.name}, ${company.id}, ${new Date()})\n        RETURNING \"id\"\n      `;\n            const clientCompanyId = clientCompanyResult[0].id;\n            // Criar perfil de administrador\n            const adminProfileResult = await clientDb.$queryRaw`\n        INSERT INTO \"Profile\" (\"name\", \"description\", \"companyId\", \"active\", \"updatedAt\")\n        VALUES ('Administrador', 'Perfil com acesso total ao sistema', ${clientCompanyId}::uuid, true, ${new Date()})\n        RETURNING \"id\"\n      `;\n            const adminProfileId = adminProfileResult[0].id;\n            // Criar módulos básicos\n            console.log(\"Criando m\\xf3dulos b\\xe1sicos...\");\n            // Dashboard\n            const dashboardResult = await clientDb.$queryRaw`\n        INSERT INTO \"Module\" (\"name\", \"description\", \"icon\", \"path\", \"order\", \"companyId\", \"active\", \"updatedAt\")\n        VALUES ('Dashboard', 'Painel principal', 'dashboard', '/dashboard', 1, ${clientCompanyId}::uuid, true, ${new Date()})\n        RETURNING \"id\"\n      `;\n            // Usuários\n            const usersResult = await clientDb.$queryRaw`\n        INSERT INTO \"Module\" (\"name\", \"description\", \"icon\", \"path\", \"order\", \"companyId\", \"active\", \"updatedAt\")\n        VALUES ('Usuários', 'Gerenciamento de usuários', 'users', '/users', 2, ${clientCompanyId}::uuid, true, ${new Date()})\n        RETURNING \"id\"\n      `;\n            // Perfis\n            const profilesResult = await clientDb.$queryRaw`\n        INSERT INTO \"Module\" (\"name\", \"description\", \"icon\", \"path\", \"order\", \"companyId\", \"active\", \"updatedAt\")\n        VALUES ('Perfis', 'Gerenciamento de perfis', 'shield', '/profiles', 3, ${clientCompanyId}::uuid, true, ${new Date()})\n        RETURNING \"id\"\n      `;\n            // Configurações\n            const settingsResult = await clientDb.$queryRaw`\n        INSERT INTO \"Module\" (\"name\", \"description\", \"icon\", \"path\", \"order\", \"companyId\", \"active\", \"updatedAt\")\n        VALUES ('Configurações', 'Configurações do sistema', 'settings', '/settings', 4, ${clientCompanyId}::uuid, true, ${new Date()})\n        RETURNING \"id\"\n      `;\n            // Criar menus para cada módulo\n            console.log(\"Criando menus b\\xe1sicos...\");\n            // Menus para Dashboard\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Visão Geral', 'Visão geral do sistema', '/dashboard', 'grid', ${dashboardResult[0].id}::uuid, 1, true, ${new Date()})\n      `;\n            // Menus para Usuários\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Listar Usuários', 'Lista de todos os usuários', '/users', 'user', ${usersResult[0].id}::uuid, 1, true, ${new Date()})\n      `;\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Novo Usuário', 'Criar novo usuário', '/users/new', 'user-plus', ${usersResult[0].id}::uuid, 2, true, ${new Date()})\n      `;\n            // Menus para Perfis\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Listar Perfis', 'Lista de todos os perfis', '/profiles', 'shield', ${profilesResult[0].id}::uuid, 1, true, ${new Date()})\n      `;\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Novo Perfil', 'Criar novo perfil', '/profiles/new', 'plus-circle', ${profilesResult[0].id}::uuid, 2, true, ${new Date()})\n      `;\n            // Menus para Configurações\n            await clientDb.$executeRaw`\n        INSERT INTO \"Menu\" (\"name\", \"description\", \"path\", \"icon\", \"moduleId\", \"order\", \"active\", \"updatedAt\")\n        VALUES ('Configurações Gerais', 'Configurações gerais do sistema', '/settings', 'settings', ${settingsResult[0].id}::uuid, 1, true, ${new Date()})\n      `;\n            // Criar permissões para o perfil de administrador\n            console.log(\"Criando permiss\\xf5es para o perfil de administrador...\");\n            // Permissão para Dashboard\n            await clientDb.$executeRaw`\n        INSERT INTO \"Permission\" (\"profileId\", \"moduleId\", \"canView\", \"canCreate\", \"canEdit\", \"canDelete\", \"updatedAt\")\n        VALUES (${adminProfileId}::uuid, ${dashboardResult[0].id}::uuid, true, true, true, true, ${new Date()})\n      `;\n            // Permissão para Usuários\n            await clientDb.$executeRaw`\n        INSERT INTO \"Permission\" (\"profileId\", \"moduleId\", \"canView\", \"canCreate\", \"canEdit\", \"canDelete\", \"updatedAt\")\n        VALUES (${adminProfileId}::uuid, ${usersResult[0].id}::uuid, true, true, true, true, ${new Date()})\n      `;\n            // Permissão para Perfis\n            await clientDb.$executeRaw`\n        INSERT INTO \"Permission\" (\"profileId\", \"moduleId\", \"canView\", \"canCreate\", \"canEdit\", \"canDelete\", \"updatedAt\")\n        VALUES (${adminProfileId}::uuid, ${profilesResult[0].id}::uuid, true, true, true, true, ${new Date()})\n      `;\n            // Permissão para Configurações\n            await clientDb.$executeRaw`\n        INSERT INTO \"Permission\" (\"profileId\", \"moduleId\", \"canView\", \"canCreate\", \"canEdit\", \"canDelete\", \"updatedAt\")\n        VALUES (${adminProfileId}::uuid, ${settingsResult[0].id}::uuid, true, true, true, true, ${new Date()})\n      `;\n            await clientDb.$disconnect();\n            console.log(`Banco de dados ${databaseName} criado e inicializado com sucesso`);\n            return company;\n        } catch (error) {\n            // Se houver um erro, excluir a empresa do banco de dados principal\n            await prisma.company.delete({\n                where: {\n                    id: company.id\n                }\n            });\n            console.error(\"Erro ao criar banco de dados:\", error);\n            throw error;\n        }\n    } catch (error) {\n        console.error(\"Erro ao criar empresa:\", error);\n        throw error;\n    }\n}\n// Função para criar um novo usuário\nasync function createUser({ name, email, password, companyId, role = \"user\" }) {\n    // Criar o usuário no banco de dados principal\n    const user = await prisma.user.create({\n        data: {\n            name,\n            email,\n            password,\n            companyId,\n            role\n        },\n        include: {\n            company: true\n        }\n    });\n    try {\n        // Criar o usuário também no banco de dados do cliente\n        const clientDbUrl = buildClientDatabaseUrl(user.company);\n        const clientDb = getClientPrisma(clientDbUrl);\n        try {\n            // Obter a empresa no banco de dados do cliente usando SQL puro\n            const clientCompany = await clientDb.$queryRaw`\n        SELECT * FROM \"ClientCompany\" WHERE \"mainId\" = ${companyId} LIMIT 1\n      `;\n            if (!clientCompany || clientCompany.length === 0) {\n                console.error(\"Empresa n\\xe3o encontrada no banco de dados do cliente\");\n                return user;\n            }\n            console.log(\"Criando usu\\xe1rio no banco do cliente com companyId:\", clientCompany[0].id);\n            // Obter o perfil de administrador se o usuário for admin\n            let profileId = null;\n            if (role === \"admin\") {\n                const adminProfile = await clientDb.$queryRaw`\n          SELECT \"id\" FROM \"Profile\" WHERE \"name\" = 'Administrador' LIMIT 1\n        `;\n                if (adminProfile && adminProfile.length > 0) {\n                    profileId = adminProfile[0].id;\n                    console.log(\"Perfil de administrador encontrado:\", profileId);\n                } else {\n                    console.log(\"Perfil de administrador n\\xe3o encontrado\");\n                }\n            }\n            // Verificar se o usuário já existe no banco de dados do cliente\n            const existingUser = await clientDb.$queryRaw`\n        SELECT \"id\" FROM \"ClientUser\" WHERE \"mainId\" = ${user.id} LIMIT 1\n      `;\n            if (existingUser && existingUser.length > 0) {\n                console.log(\"Usu\\xe1rio j\\xe1 existe no banco de dados do cliente, atualizando...\");\n                // Atualizar o usuário com ou sem perfil\n                if (profileId) {\n                    await clientDb.$executeRaw`\n            UPDATE \"ClientUser\" \n            SET \"name\" = ${user.name}, \n                \"email\" = ${user.email}, \n                \"profileId\" = ${profileId}::uuid, \n                \"role\" = ${user.role}, \n                \"updatedAt\" = ${new Date()}\n            WHERE \"mainId\" = ${user.id}\n          `;\n                } else {\n                    await clientDb.$executeRaw`\n            UPDATE \"ClientUser\" \n            SET \"name\" = ${user.name}, \n                \"email\" = ${user.email}, \n                \"profileId\" = NULL, \n                \"role\" = ${user.role}, \n                \"updatedAt\" = ${new Date()}\n            WHERE \"mainId\" = ${user.id}\n          `;\n                }\n            } else {\n                console.log(\"Criando novo usu\\xe1rio no banco de dados do cliente...\");\n                // Criar o usuário no banco de dados do cliente usando SQL puro\n                // Criar o usuário com ou sem perfil\n                if (profileId) {\n                    await clientDb.$executeRaw`\n            INSERT INTO \"ClientUser\" (\"name\", \"email\", \"mainId\", \"companyId\", \"profileId\", \"role\", \"active\", \"updatedAt\")\n            VALUES (\n              ${user.name}, \n              ${user.email}, \n              ${user.id}, \n              ${clientCompany[0].id}::uuid, \n              ${profileId}::uuid, \n              ${user.role}, \n              true, \n              ${new Date()}\n            )\n          `;\n                } else {\n                    await clientDb.$executeRaw`\n            INSERT INTO \"ClientUser\" (\"name\", \"email\", \"mainId\", \"companyId\", \"role\", \"active\", \"updatedAt\")\n            VALUES (\n              ${user.name}, \n              ${user.email}, \n              ${user.id}, \n              ${clientCompany[0].id}::uuid, \n              ${user.role}, \n              true, \n              ${new Date()}\n            )\n          `;\n                }\n            }\n            console.log(\"Usu\\xe1rio criado/atualizado com sucesso no banco de dados do cliente\");\n        } catch (error) {\n            console.error(\"Erro ao criar/atualizar usu\\xe1rio no banco de dados do cliente:\", error);\n        }\n        await clientDb.$disconnect();\n        return user;\n    } catch (error) {\n        console.error(\"Erro ao criar usu\\xe1rio no banco de dados do cliente:\", error);\n        // Não vamos excluir o usuário do banco principal se houver erro no banco do cliente\n        // Isso pode ser tratado posteriormente\n        return user;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUtHLEVBQUUsQ0FBQztVQUM3QixDQUFDO2dCQUNIO1lBQ0YsT0FBTztnQkFDTG1CLFFBQVFDLEdBQUcsQ0FBQztnQkFDWiwrREFBK0Q7Z0JBQy9ELG9DQUFvQztnQkFDcEMsSUFBSWdDLFdBQVc7b0JBQ2IsTUFBTXRCLFNBQVNDLFdBQVcsQ0FBQzs7O2NBR3ZCLEVBQUVsQyxLQUFLUSxJQUFJLENBQUM7Y0FDWixFQUFFUixLQUFLaUQsS0FBSyxDQUFDO2NBQ2IsRUFBRWpELEtBQUtHLEVBQUUsQ0FBQztjQUNWLEVBQUVrRCxhQUFhLENBQUMsRUFBRSxDQUFDbEQsRUFBRSxDQUFDO2NBQ3RCLEVBQUVvRCxVQUFVO2NBQ1osRUFBRXZELEtBQUtvRCxJQUFJLENBQUM7O2NBRVosRUFBRSxJQUFJZixPQUFPOztVQUVqQixDQUFDO2dCQUNILE9BQU87b0JBQ0wsTUFBTUosU0FBU0MsV0FBVyxDQUFDOzs7Y0FHdkIsRUFBRWxDLEtBQUtRLElBQUksQ0FBQztjQUNaLEVBQUVSLEtBQUtpRCxLQUFLLENBQUM7Y0FDYixFQUFFakQsS0FBS0csRUFBRSxDQUFDO2NBQ1YsRUFBRWtELGFBQWEsQ0FBQyxFQUFFLENBQUNsRCxFQUFFLENBQUM7Y0FDdEIsRUFBRUgsS0FBS29ELElBQUksQ0FBQzs7Y0FFWixFQUFFLElBQUlmLE9BQU87O1VBRWpCLENBQUM7Z0JBQ0g7WUFDRjtZQUVBZixRQUFRQyxHQUFHLENBQUM7UUFDZCxFQUFFLE9BQU91QixPQUFPO1lBQ2R4QixRQUFRd0IsS0FBSyxDQUFDLG9FQUFpRUE7UUFDakY7UUFFQSxNQUFNYixTQUFTWSxXQUFXO1FBRTFCLE9BQU83QztJQUNULEVBQUUsT0FBTzhDLE9BQU87UUFDZHhCLFFBQVF3QixLQUFLLENBQUMsMERBQXVEQTtRQUNyRSxvRkFBb0Y7UUFDcEYsdUNBQXVDO1FBQ3ZDLE9BQU85QztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZXN0YW8td2ViLWVycC8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xuXG4vLyBDbGllbnRlIFByaXNtYSBwYXJhIG8gYmFuY28gZGUgZGFkb3MgcHJpbmNpcGFsXG5leHBvcnQgY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG4vLyBGdW7Dp8OjbyBwYXJhIGNyaWFyIHVtIGNsaWVudGUgUHJpc21hIHBhcmEgbyBiYW5jbyBkZSBkYWRvcyBlc3BlY8OtZmljbyBkZSB1bWEgZW1wcmVzYVxuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudFByaXNtYShkYXRhYmFzZVVybDogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBkYXRhc291cmNlczoge1xuICAgICAgZGI6IHtcbiAgICAgICAgdXJsOiBkYXRhYmFzZVVybCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgY29uc3RydWlyIGEgVVJMIGRlIGNvbmV4w6NvIGRvIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbmV4cG9ydCBmdW5jdGlvbiBidWlsZENsaWVudERhdGFiYXNlVXJsKGNvbXBhbnk6IHsgXG4gIGRhdGFiYXNlSG9zdDogc3RyaW5nOyBcbiAgZGF0YWJhc2VQb3J0OiBudW1iZXI7IFxuICBkYXRhYmFzZVVzZXI6IHN0cmluZzsgXG4gIGRhdGFiYXNlUGFzczogc3RyaW5nOyBcbiAgZGF0YWJhc2VOYW1lOiBzdHJpbmc7XG59KSB7XG4gIC8vIENvZGlmaWNhciBhIHNlbmhhIHBhcmEgbGlkYXIgY29tIGNhcmFjdGVyZXMgZXNwZWNpYWlzXG4gIGNvbnN0IGVuY29kZWRQYXNzID0gZW5jb2RlVVJJQ29tcG9uZW50KGNvbXBhbnkuZGF0YWJhc2VQYXNzKTtcbiAgcmV0dXJuIGBwb3N0Z3Jlc3FsOi8vJHtjb21wYW55LmRhdGFiYXNlVXNlcn06JHtlbmNvZGVkUGFzc31AJHtjb21wYW55LmRhdGFiYXNlSG9zdH06JHtjb21wYW55LmRhdGFiYXNlUG9ydH0vJHtjb21wYW55LmRhdGFiYXNlTmFtZX1gO1xufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIG9idGVyIGNvbmV4w6NvIGNvbSBvIGJhbmNvIGRlIGRhZG9zIGRhIGVtcHJlc2EgZG8gdXN1w6FyaW9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb21wYW55RGJDb25uZWN0aW9uKHVzZXJJZDogc3RyaW5nKSB7XG4gIC8vIEJ1c2NhciB1c3XDoXJpbyBlIGVtcHJlc2EgYXNzb2NpYWRhXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgaW5jbHVkZTogeyBjb21wYW55OiB0cnVlIH0sXG4gIH0pO1xuXG4gIGlmICghdXNlciB8fCAhdXNlci5jb21wYW55KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc3XDoXJpbyBvdSBlbXByZXNhIG7Do28gZW5jb250cmFkb3MnKTtcbiAgfVxuXG4gIC8vIENvbnN0cnVpciBVUkwgZGUgY29uZXjDo29cbiAgY29uc3QgZGJVcmwgPSBidWlsZENsaWVudERhdGFiYXNlVXJsKHVzZXIuY29tcGFueSk7XG4gIFxuICAvLyBDcmlhciBlIHJldG9ybmFyIGNsaWVudGUgUHJpc21hIHBhcmEgbyBiYW5jbyBkZSBkYWRvcyBkYSBlbXByZXNhXG4gIHJldHVybiBnZXRDbGllbnRQcmlzbWEoZGJVcmwpO1xufVxuXG4vLyBGdW7Dp8OjbyBwYXJhIGNyaWFyIHVtYSBub3ZhIGVtcHJlc2FcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb21wYW55KHsgXG4gIG5hbWUsIFxuICBkYXRhYmFzZU5hbWUsIFxuICBkYXRhYmFzZUhvc3QgPSAnbG9jYWxob3N0JyxcbiAgZGF0YWJhc2VQb3J0ID0gNTQzMixcbiAgZGF0YWJhc2VVc2VyID0gJ3Bvc3RncmVzJyxcbiAgZGF0YWJhc2VQYXNzIFxufTogeyBcbiAgbmFtZTogc3RyaW5nOyBcbiAgZGF0YWJhc2VOYW1lOiBzdHJpbmc7IFxuICBkYXRhYmFzZUhvc3Q/OiBzdHJpbmc7XG4gIGRhdGFiYXNlUG9ydD86IG51bWJlcjtcbiAgZGF0YWJhc2VVc2VyPzogc3RyaW5nO1xuICBkYXRhYmFzZVBhc3M6IHN0cmluZztcbn0pIHtcbiAgdHJ5IHtcbiAgICAvLyBDcmlhciBhIGVtcHJlc2Egbm8gYmFuY28gZGUgZGFkb3MgcHJpbmNpcGFsXG4gICAgY29uc3QgY29tcGFueSA9IGF3YWl0IHByaXNtYS5jb21wYW55LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRhdGFiYXNlTmFtZSxcbiAgICAgICAgZGF0YWJhc2VIb3N0LFxuICAgICAgICBkYXRhYmFzZVBvcnQsXG4gICAgICAgIGRhdGFiYXNlVXNlcixcbiAgICAgICAgZGF0YWJhc2VQYXNzLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBDb25lY3RhciBhbyBQb3N0Z3JlU1FMIGUgY3JpYXIgbyBiYW5jbyBkZSBkYWRvc1xuICAgICAgLy8gVXNhciBjcmVkZW5jaWFpcyBkbyAuZW52IHNlIGRpc3BvbsOtdmVpcywgY2FzbyBjb250csOhcmlvIHVzYXIgYXMgZm9ybmVjaWRhc1xuICAgICAgY29uc3QgcGdVc2VyID0gcHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVNFUiB8fCBkYXRhYmFzZVVzZXI7XG4gICAgICBjb25zdCBwZ1Bhc3MgPSBwcm9jZXNzLmVudi5QT1NUR1JFU19QQVNTV09SRCB8fCBkYXRhYmFzZVBhc3M7XG4gICAgICBjb25zdCBwZ0hvc3QgPSBwcm9jZXNzLmVudi5QT1NUR1JFU19IT1NUIHx8IGRhdGFiYXNlSG9zdDtcbiAgICAgIGNvbnN0IHBnUG9ydCA9IHByb2Nlc3MuZW52LlBPU1RHUkVTX1BPUlQgPyBwYXJzZUludChwcm9jZXNzLmVudi5QT1NUR1JFU19QT1JUKSA6IGRhdGFiYXNlUG9ydDtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFRlbnRhbmRvIGNvbmVjdGFyIGFvIFBvc3RncmVTUUwgY29tbyAke3BnVXNlcn1AJHtwZ0hvc3R9OiR7cGdQb3J0fWApO1xuICAgICAgXG4gICAgICAvLyBDb2RpZmljYXIgYSBzZW5oYSBwYXJhIGxpZGFyIGNvbSBjYXJhY3RlcmVzIGVzcGVjaWFpc1xuICAgICAgY29uc3QgZW5jb2RlZFBhc3MgPSBlbmNvZGVVUklDb21wb25lbnQocGdQYXNzKTtcbiAgICAgIGNvbnN0IHBnVXJsID0gYHBvc3RncmVzcWw6Ly8ke3BnVXNlcn06JHtlbmNvZGVkUGFzc31AJHtwZ0hvc3R9OiR7cGdQb3J0fS9wb3N0Z3Jlc2A7XG4gICAgICBjb25zdCBjcmVhdGVEYkNvbW1hbmQgPSBgQ1JFQVRFIERBVEFCQVNFIFwiJHtkYXRhYmFzZU5hbWV9XCJgO1xuICAgICAgXG4gICAgICAvLyBVc2FyIG8gY2xpZW50ZSBwZyBwYXJhIGV4ZWN1dGFyIG8gY29tYW5kbyBTUUxcbiAgICAgIGNvbnN0IHsgUG9vbCB9ID0gcmVxdWlyZSgncGcnKTtcbiAgICAgIGNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmc6IHBnVXJsIH0pO1xuICAgICAgYXdhaXQgcG9vbC5xdWVyeShjcmVhdGVEYkNvbW1hbmQpO1xuICAgICAgYXdhaXQgcG9vbC5lbmQoKTtcbiAgICAgIFxuICAgICAgLy8gSW5pY2lhbGl6YXIgbyBlc3F1ZW1hIGRvIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbiAgICAgIGNvbnN0IGNsaWVudERiVXJsID0gYnVpbGRDbGllbnREYXRhYmFzZVVybCh7XG4gICAgICAgIGRhdGFiYXNlSG9zdCxcbiAgICAgICAgZGF0YWJhc2VQb3J0LFxuICAgICAgICBkYXRhYmFzZVVzZXIsXG4gICAgICAgIGRhdGFiYXNlUGFzcyxcbiAgICAgICAgZGF0YWJhc2VOYW1lLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENyaWFyIGFzIHRhYmVsYXMgbm8gYmFuY28gZGUgZGFkb3MgZG8gY2xpZW50ZSB1c2FuZG8gdW0gc2NyaXB0IFNRTFxuICAgICAgY29uc3QgY2xpZW50RGIgPSBnZXRDbGllbnRQcmlzbWEoY2xpZW50RGJVcmwpO1xuICAgICAgXG4gICAgICAvLyBDcmlhciBhcyB0YWJlbGFzIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGUgdW1hIHBvciB1bWFcbiAgICAgIC8vIFRhYmVsYSBDbGllbnRDb21wYW55XG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXCJDbGllbnRDb21wYW55XCIgKFxuICAgICAgICAgIFwiaWRcIiBVVUlEIFBSSU1BUlkgS0VZIERFRkFVTFQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICAgICAgXCJuYW1lXCIgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBcIm1haW5JZFwiIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICAgIFwiYWN0aXZlXCIgQk9PTEVBTiBOT1QgTlVMTCBERUZBVUxUIHRydWUsXG4gICAgICAgICAgXCJjcmVhdGVkQXRcIiBUSU1FU1RBTVAoMykgTk9UIE5VTEwgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBcInVwZGF0ZWRBdFwiIFRJTUVTVEFNUCgzKSBOT1QgTlVMTFxuICAgICAgICApXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBUYWJlbGEgQ2xpZW50VXNlclxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFwiQ2xpZW50VXNlclwiIChcbiAgICAgICAgICBcImlkXCIgVVVJRCBQUklNQVJZIEtFWSBERUZBVUxUIGdlbl9yYW5kb21fdXVpZCgpLFxuICAgICAgICAgIFwibmFtZVwiIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgXCJlbWFpbFwiIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICAgIFwibWFpbklkXCIgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgICAgXCJjb21wYW55SWRcIiBVVUlEIE5PVCBOVUxMLFxuICAgICAgICAgIFwicHJvZmlsZUlkXCIgVVVJRCxcbiAgICAgICAgICBcInJvbGVcIiBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ3VzZXInLFxuICAgICAgICAgIFwiYWN0aXZlXCIgQk9PTEVBTiBOT1QgTlVMTCBERUZBVUxUIHRydWUsXG4gICAgICAgICAgXCJjcmVhdGVkQXRcIiBUSU1FU1RBTVAoMykgTk9UIE5VTEwgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBcInVwZGF0ZWRBdFwiIFRJTUVTVEFNUCgzKSBOT1QgTlVMTCxcbiAgICAgICAgICBGT1JFSUdOIEtFWSAoXCJjb21wYW55SWRcIikgUkVGRVJFTkNFUyBcIkNsaWVudENvbXBhbnlcIihcImlkXCIpXG4gICAgICAgIClcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIC8vIFRhYmVsYSBQcm9maWxlXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXCJQcm9maWxlXCIgKFxuICAgICAgICAgIFwiaWRcIiBVVUlEIFBSSU1BUlkgS0VZIERFRkFVTFQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICAgICAgXCJuYW1lXCIgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCIgVEVYVCxcbiAgICAgICAgICBcImNvbXBhbnlJZFwiIFVVSUQgTk9UIE5VTEwsXG4gICAgICAgICAgXCJhY3RpdmVcIiBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgdHJ1ZSxcbiAgICAgICAgICBcImNyZWF0ZWRBdFwiIFRJTUVTVEFNUCgzKSBOT1QgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICAgIFwidXBkYXRlZEF0XCIgVElNRVNUQU1QKDMpIE5PVCBOVUxMLFxuICAgICAgICAgIEZPUkVJR04gS0VZIChcImNvbXBhbnlJZFwiKSBSRUZFUkVOQ0VTIFwiQ2xpZW50Q29tcGFueVwiKFwiaWRcIilcbiAgICAgICAgKVxuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gVGFiZWxhIE1vZHVsZVxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFwiTW9kdWxlXCIgKFxuICAgICAgICAgIFwiaWRcIiBVVUlEIFBSSU1BUlkgS0VZIERFRkFVTFQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICAgICAgXCJuYW1lXCIgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCIgVEVYVCxcbiAgICAgICAgICBcImljb25cIiBURVhULFxuICAgICAgICAgIFwicGF0aFwiIFRFWFQsXG4gICAgICAgICAgXCJvcmRlclwiIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgICAgICAgIFwicGFyZW50SWRcIiBVVUlELFxuICAgICAgICAgIFwiY29tcGFueUlkXCIgVVVJRCBOT1QgTlVMTCxcbiAgICAgICAgICBcImFjdGl2ZVwiIEJPT0xFQU4gTk9UIE5VTEwgREVGQVVMVCB0cnVlLFxuICAgICAgICAgIFwiY3JlYXRlZEF0XCIgVElNRVNUQU1QKDMpIE5PVCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgXCJ1cGRhdGVkQXRcIiBUSU1FU1RBTVAoMykgTk9UIE5VTEwsXG4gICAgICAgICAgRk9SRUlHTiBLRVkgKFwiY29tcGFueUlkXCIpIFJFRkVSRU5DRVMgXCJDbGllbnRDb21wYW55XCIoXCJpZFwiKVxuICAgICAgICApXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBBZGljaW9uYXIgY2hhdmUgZXN0cmFuZ2VpcmEgcGFyYSBwYXJlbnRJZCBhcMOzcyBhIHRhYmVsYSBNb2R1bGUgc2VyIGNyaWFkYVxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIEFMVEVSIFRBQkxFIFwiTW9kdWxlXCIgQUREIEZPUkVJR04gS0VZIChcInBhcmVudElkXCIpIFJFRkVSRU5DRVMgXCJNb2R1bGVcIihcImlkXCIpXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBUYWJlbGEgTWVudVxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFwiTWVudVwiIChcbiAgICAgICAgICBcImlkXCIgVVVJRCBQUklNQVJZIEtFWSBERUZBVUxUIGdlbl9yYW5kb21fdXVpZCgpLFxuICAgICAgICAgIFwibmFtZVwiIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiIFRFWFQsXG4gICAgICAgICAgXCJwYXRoXCIgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBcImljb25cIiBURVhULFxuICAgICAgICAgIFwibW9kdWxlSWRcIiBVVUlEIE5PVCBOVUxMLFxuICAgICAgICAgIFwicGFyZW50SWRcIiBVVUlELFxuICAgICAgICAgIFwib3JkZXJcIiBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICAgICAgICBcImFjdGl2ZVwiIEJPT0xFQU4gTk9UIE5VTEwgREVGQVVMVCB0cnVlLFxuICAgICAgICAgIFwiY3JlYXRlZEF0XCIgVElNRVNUQU1QKDMpIE5PVCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgXCJ1cGRhdGVkQXRcIiBUSU1FU1RBTVAoMykgTk9UIE5VTEwsXG4gICAgICAgICAgRk9SRUlHTiBLRVkgKFwibW9kdWxlSWRcIikgUkVGRVJFTkNFUyBcIk1vZHVsZVwiKFwiaWRcIiksXG4gICAgICAgICAgRk9SRUlHTiBLRVkgKFwicGFyZW50SWRcIikgUkVGRVJFTkNFUyBcIk1lbnVcIihcImlkXCIpXG4gICAgICAgIClcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIC8vIFRhYmVsYSBQZXJtaXNzaW9uXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXCJQZXJtaXNzaW9uXCIgKFxuICAgICAgICAgIFwiaWRcIiBVVUlEIFBSSU1BUlkgS0VZIERFRkFVTFQgZ2VuX3JhbmRvbV91dWlkKCksXG4gICAgICAgICAgXCJwcm9maWxlSWRcIiBVVUlEIE5PVCBOVUxMLFxuICAgICAgICAgIFwibW9kdWxlSWRcIiBVVUlEIE5PVCBOVUxMLFxuICAgICAgICAgIFwiY2FuVmlld1wiIEJPT0xFQU4gTk9UIE5VTEwgREVGQVVMVCBmYWxzZSxcbiAgICAgICAgICBcImNhbkNyZWF0ZVwiIEJPT0xFQU4gTk9UIE5VTEwgREVGQVVMVCBmYWxzZSxcbiAgICAgICAgICBcImNhbkVkaXRcIiBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgZmFsc2UsXG4gICAgICAgICAgXCJjYW5EZWxldGVcIiBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgZmFsc2UsXG4gICAgICAgICAgXCJjcmVhdGVkQXRcIiBUSU1FU1RBTVAoMykgTk9UIE5VTEwgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBcInVwZGF0ZWRBdFwiIFRJTUVTVEFNUCgzKSBOT1QgTlVMTCxcbiAgICAgICAgICBGT1JFSUdOIEtFWSAoXCJwcm9maWxlSWRcIikgUkVGRVJFTkNFUyBcIlByb2ZpbGVcIihcImlkXCIpLFxuICAgICAgICAgIEZPUkVJR04gS0VZIChcIm1vZHVsZUlkXCIpIFJFRkVSRU5DRVMgXCJNb2R1bGVcIihcImlkXCIpLFxuICAgICAgICAgIFVOSVFVRSAoXCJwcm9maWxlSWRcIiwgXCJtb2R1bGVJZFwiKVxuICAgICAgICApXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBBZGljaW9uYXIgY2hhdmUgZXN0cmFuZ2VpcmEgcGFyYSBwcm9maWxlSWQgZW0gQ2xpZW50VXNlclxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIEFMVEVSIFRBQkxFIFwiQ2xpZW50VXNlclwiIEFERCBGT1JFSUdOIEtFWSAoXCJwcm9maWxlSWRcIikgUkVGRVJFTkNFUyBcIlByb2ZpbGVcIihcImlkXCIpXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBJbnNlcmlyIGEgZW1wcmVzYSBubyBiYW5jbyBkZSBkYWRvcyBkbyBjbGllbnRlIHVzYW5kbyBTUUwgcHVyb1xuICAgICAgY29uc3QgY2xpZW50Q29tcGFueVJlc3VsdCA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgSU5TRVJUIElOVE8gXCJDbGllbnRDb21wYW55XCIgKFwibmFtZVwiLCBcIm1haW5JZFwiLCBcInVwZGF0ZWRBdFwiKVxuICAgICAgICBWQUxVRVMgKCR7Y29tcGFueS5uYW1lfSwgJHtjb21wYW55LmlkfSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgICAgUkVUVVJOSU5HIFwiaWRcIlxuICAgICAgYDtcbiAgICAgIFxuICAgICAgY29uc3QgY2xpZW50Q29tcGFueUlkID0gY2xpZW50Q29tcGFueVJlc3VsdFswXS5pZDtcbiAgICAgIFxuICAgICAgLy8gQ3JpYXIgcGVyZmlsIGRlIGFkbWluaXN0cmFkb3JcbiAgICAgIGNvbnN0IGFkbWluUHJvZmlsZVJlc3VsdCA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgSU5TRVJUIElOVE8gXCJQcm9maWxlXCIgKFwibmFtZVwiLCBcImRlc2NyaXB0aW9uXCIsIFwiY29tcGFueUlkXCIsIFwiYWN0aXZlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJ0FkbWluaXN0cmFkb3InLCAnUGVyZmlsIGNvbSBhY2Vzc28gdG90YWwgYW8gc2lzdGVtYScsICR7Y2xpZW50Q29tcGFueUlkfTo6dXVpZCwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgICAgUkVUVVJOSU5HIFwiaWRcIlxuICAgICAgYDtcbiAgICAgIFxuICAgICAgY29uc3QgYWRtaW5Qcm9maWxlSWQgPSBhZG1pblByb2ZpbGVSZXN1bHRbMF0uaWQ7XG4gICAgICBcbiAgICAgIC8vIENyaWFyIG3Ds2R1bG9zIGLDoXNpY29zXG4gICAgICBjb25zb2xlLmxvZygnQ3JpYW5kbyBtw7NkdWxvcyBiw6FzaWNvcy4uLicpO1xuICAgICAgXG4gICAgICAvLyBEYXNoYm9hcmRcbiAgICAgIGNvbnN0IGRhc2hib2FyZFJlc3VsdCA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgSU5TRVJUIElOVE8gXCJNb2R1bGVcIiAoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIiwgXCJpY29uXCIsIFwicGF0aFwiLCBcIm9yZGVyXCIsIFwiY29tcGFueUlkXCIsIFwiYWN0aXZlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJ0Rhc2hib2FyZCcsICdQYWluZWwgcHJpbmNpcGFsJywgJ2Rhc2hib2FyZCcsICcvZGFzaGJvYXJkJywgMSwgJHtjbGllbnRDb21wYW55SWR9Ojp1dWlkLCB0cnVlLCAke25ldyBEYXRlKCl9KVxuICAgICAgICBSRVRVUk5JTkcgXCJpZFwiXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBVc3XDoXJpb3NcbiAgICAgIGNvbnN0IHVzZXJzUmVzdWx0ID0gYXdhaXQgY2xpZW50RGIuJHF1ZXJ5UmF3PEFycmF5PHtpZDogc3RyaW5nfT4+YFxuICAgICAgICBJTlNFUlQgSU5UTyBcIk1vZHVsZVwiIChcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImljb25cIiwgXCJwYXRoXCIsIFwib3JkZXJcIiwgXCJjb21wYW55SWRcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgVkFMVUVTICgnVXN1w6FyaW9zJywgJ0dlcmVuY2lhbWVudG8gZGUgdXN1w6FyaW9zJywgJ3VzZXJzJywgJy91c2VycycsIDIsICR7Y2xpZW50Q29tcGFueUlkfTo6dXVpZCwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgICAgUkVUVVJOSU5HIFwiaWRcIlxuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gUGVyZmlzXG4gICAgICBjb25zdCBwcm9maWxlc1Jlc3VsdCA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgSU5TRVJUIElOVE8gXCJNb2R1bGVcIiAoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIiwgXCJpY29uXCIsIFwicGF0aFwiLCBcIm9yZGVyXCIsIFwiY29tcGFueUlkXCIsIFwiYWN0aXZlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJ1BlcmZpcycsICdHZXJlbmNpYW1lbnRvIGRlIHBlcmZpcycsICdzaGllbGQnLCAnL3Byb2ZpbGVzJywgMywgJHtjbGllbnRDb21wYW55SWR9Ojp1dWlkLCB0cnVlLCAke25ldyBEYXRlKCl9KVxuICAgICAgICBSRVRVUk5JTkcgXCJpZFwiXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBDb25maWd1cmHDp8O1ZXNcbiAgICAgIGNvbnN0IHNldHRpbmdzUmVzdWx0ID0gYXdhaXQgY2xpZW50RGIuJHF1ZXJ5UmF3PEFycmF5PHtpZDogc3RyaW5nfT4+YFxuICAgICAgICBJTlNFUlQgSU5UTyBcIk1vZHVsZVwiIChcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImljb25cIiwgXCJwYXRoXCIsIFwib3JkZXJcIiwgXCJjb21wYW55SWRcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgVkFMVUVTICgnQ29uZmlndXJhw6fDtWVzJywgJ0NvbmZpZ3VyYcOnw7VlcyBkbyBzaXN0ZW1hJywgJ3NldHRpbmdzJywgJy9zZXR0aW5ncycsIDQsICR7Y2xpZW50Q29tcGFueUlkfTo6dXVpZCwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgICAgUkVUVVJOSU5HIFwiaWRcIlxuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gQ3JpYXIgbWVudXMgcGFyYSBjYWRhIG3Ds2R1bG9cbiAgICAgIGNvbnNvbGUubG9nKCdDcmlhbmRvIG1lbnVzIGLDoXNpY29zLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIE1lbnVzIHBhcmEgRGFzaGJvYXJkXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgSU5TRVJUIElOVE8gXCJNZW51XCIgKFwibmFtZVwiLCBcImRlc2NyaXB0aW9uXCIsIFwicGF0aFwiLCBcImljb25cIiwgXCJtb2R1bGVJZFwiLCBcIm9yZGVyXCIsIFwiYWN0aXZlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJ1Zpc8OjbyBHZXJhbCcsICdWaXPDo28gZ2VyYWwgZG8gc2lzdGVtYScsICcvZGFzaGJvYXJkJywgJ2dyaWQnLCAke2Rhc2hib2FyZFJlc3VsdFswXS5pZH06OnV1aWQsIDEsIHRydWUsICR7bmV3IERhdGUoKX0pXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBNZW51cyBwYXJhIFVzdcOhcmlvc1xuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIElOU0VSVCBJTlRPIFwiTWVudVwiIChcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcInBhdGhcIiwgXCJpY29uXCIsIFwibW9kdWxlSWRcIiwgXCJvcmRlclwiLCBcImFjdGl2ZVwiLCBcInVwZGF0ZWRBdFwiKVxuICAgICAgICBWQUxVRVMgKCdMaXN0YXIgVXN1w6FyaW9zJywgJ0xpc3RhIGRlIHRvZG9zIG9zIHVzdcOhcmlvcycsICcvdXNlcnMnLCAndXNlcicsICR7dXNlcnNSZXN1bHRbMF0uaWR9Ojp1dWlkLCAxLCB0cnVlLCAke25ldyBEYXRlKCl9KVxuICAgICAgYDtcbiAgICAgIFxuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIElOU0VSVCBJTlRPIFwiTWVudVwiIChcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcInBhdGhcIiwgXCJpY29uXCIsIFwibW9kdWxlSWRcIiwgXCJvcmRlclwiLCBcImFjdGl2ZVwiLCBcInVwZGF0ZWRBdFwiKVxuICAgICAgICBWQUxVRVMgKCdOb3ZvIFVzdcOhcmlvJywgJ0NyaWFyIG5vdm8gdXN1w6FyaW8nLCAnL3VzZXJzL25ldycsICd1c2VyLXBsdXMnLCAke3VzZXJzUmVzdWx0WzBdLmlkfTo6dXVpZCwgMiwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIC8vIE1lbnVzIHBhcmEgUGVyZmlzXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgSU5TRVJUIElOVE8gXCJNZW51XCIgKFwibmFtZVwiLCBcImRlc2NyaXB0aW9uXCIsIFwicGF0aFwiLCBcImljb25cIiwgXCJtb2R1bGVJZFwiLCBcIm9yZGVyXCIsIFwiYWN0aXZlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJ0xpc3RhciBQZXJmaXMnLCAnTGlzdGEgZGUgdG9kb3Mgb3MgcGVyZmlzJywgJy9wcm9maWxlcycsICdzaGllbGQnLCAke3Byb2ZpbGVzUmVzdWx0WzBdLmlkfTo6dXVpZCwgMSwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIGF3YWl0IGNsaWVudERiLiRleGVjdXRlUmF3YFxuICAgICAgICBJTlNFUlQgSU5UTyBcIk1lbnVcIiAoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIiwgXCJwYXRoXCIsIFwiaWNvblwiLCBcIm1vZHVsZUlkXCIsIFwib3JkZXJcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgVkFMVUVTICgnTm92byBQZXJmaWwnLCAnQ3JpYXIgbm92byBwZXJmaWwnLCAnL3Byb2ZpbGVzL25ldycsICdwbHVzLWNpcmNsZScsICR7cHJvZmlsZXNSZXN1bHRbMF0uaWR9Ojp1dWlkLCAyLCB0cnVlLCAke25ldyBEYXRlKCl9KVxuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gTWVudXMgcGFyYSBDb25maWd1cmHDp8O1ZXNcbiAgICAgIGF3YWl0IGNsaWVudERiLiRleGVjdXRlUmF3YFxuICAgICAgICBJTlNFUlQgSU5UTyBcIk1lbnVcIiAoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIiwgXCJwYXRoXCIsIFwiaWNvblwiLCBcIm1vZHVsZUlkXCIsIFwib3JkZXJcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgVkFMVUVTICgnQ29uZmlndXJhw6fDtWVzIEdlcmFpcycsICdDb25maWd1cmHDp8O1ZXMgZ2VyYWlzIGRvIHNpc3RlbWEnLCAnL3NldHRpbmdzJywgJ3NldHRpbmdzJywgJHtzZXR0aW5nc1Jlc3VsdFswXS5pZH06OnV1aWQsIDEsIHRydWUsICR7bmV3IERhdGUoKX0pXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBDcmlhciBwZXJtaXNzw7VlcyBwYXJhIG8gcGVyZmlsIGRlIGFkbWluaXN0cmFkb3JcbiAgICAgIGNvbnNvbGUubG9nKCdDcmlhbmRvIHBlcm1pc3PDtWVzIHBhcmEgbyBwZXJmaWwgZGUgYWRtaW5pc3RyYWRvci4uLicpO1xuICAgICAgXG4gICAgICAvLyBQZXJtaXNzw6NvIHBhcmEgRGFzaGJvYXJkXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgSU5TRVJUIElOVE8gXCJQZXJtaXNzaW9uXCIgKFwicHJvZmlsZUlkXCIsIFwibW9kdWxlSWRcIiwgXCJjYW5WaWV3XCIsIFwiY2FuQ3JlYXRlXCIsIFwiY2FuRWRpdFwiLCBcImNhbkRlbGV0ZVwiLCBcInVwZGF0ZWRBdFwiKVxuICAgICAgICBWQUxVRVMgKCR7YWRtaW5Qcm9maWxlSWR9Ojp1dWlkLCAke2Rhc2hib2FyZFJlc3VsdFswXS5pZH06OnV1aWQsIHRydWUsIHRydWUsIHRydWUsIHRydWUsICR7bmV3IERhdGUoKX0pXG4gICAgICBgO1xuICAgICAgXG4gICAgICAvLyBQZXJtaXNzw6NvIHBhcmEgVXN1w6FyaW9zXG4gICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgSU5TRVJUIElOVE8gXCJQZXJtaXNzaW9uXCIgKFwicHJvZmlsZUlkXCIsIFwibW9kdWxlSWRcIiwgXCJjYW5WaWV3XCIsIFwiY2FuQ3JlYXRlXCIsIFwiY2FuRWRpdFwiLCBcImNhbkRlbGV0ZVwiLCBcInVwZGF0ZWRBdFwiKVxuICAgICAgICBWQUxVRVMgKCR7YWRtaW5Qcm9maWxlSWR9Ojp1dWlkLCAke3VzZXJzUmVzdWx0WzBdLmlkfTo6dXVpZCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgJHtuZXcgRGF0ZSgpfSlcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIC8vIFBlcm1pc3PDo28gcGFyYSBQZXJmaXNcbiAgICAgIGF3YWl0IGNsaWVudERiLiRleGVjdXRlUmF3YFxuICAgICAgICBJTlNFUlQgSU5UTyBcIlBlcm1pc3Npb25cIiAoXCJwcm9maWxlSWRcIiwgXCJtb2R1bGVJZFwiLCBcImNhblZpZXdcIiwgXCJjYW5DcmVhdGVcIiwgXCJjYW5FZGl0XCIsIFwiY2FuRGVsZXRlXCIsIFwidXBkYXRlZEF0XCIpXG4gICAgICAgIFZBTFVFUyAoJHthZG1pblByb2ZpbGVJZH06OnV1aWQsICR7cHJvZmlsZXNSZXN1bHRbMF0uaWR9Ojp1dWlkLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCAke25ldyBEYXRlKCl9KVxuICAgICAgYDtcbiAgICAgIFxuICAgICAgLy8gUGVybWlzc8OjbyBwYXJhIENvbmZpZ3VyYcOnw7Vlc1xuICAgICAgYXdhaXQgY2xpZW50RGIuJGV4ZWN1dGVSYXdgXG4gICAgICAgIElOU0VSVCBJTlRPIFwiUGVybWlzc2lvblwiIChcInByb2ZpbGVJZFwiLCBcIm1vZHVsZUlkXCIsIFwiY2FuVmlld1wiLCBcImNhbkNyZWF0ZVwiLCBcImNhbkVkaXRcIiwgXCJjYW5EZWxldGVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgVkFMVUVTICgke2FkbWluUHJvZmlsZUlkfTo6dXVpZCwgJHtzZXR0aW5nc1Jlc3VsdFswXS5pZH06OnV1aWQsIHRydWUsIHRydWUsIHRydWUsIHRydWUsICR7bmV3IERhdGUoKX0pXG4gICAgICBgO1xuICAgICAgXG4gICAgICBhd2FpdCBjbGllbnREYi4kZGlzY29ubmVjdCgpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgQmFuY28gZGUgZGFkb3MgJHtkYXRhYmFzZU5hbWV9IGNyaWFkbyBlIGluaWNpYWxpemFkbyBjb20gc3VjZXNzb2ApO1xuICAgICAgXG4gICAgICByZXR1cm4gY29tcGFueTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2UgaG91dmVyIHVtIGVycm8sIGV4Y2x1aXIgYSBlbXByZXNhIGRvIGJhbmNvIGRlIGRhZG9zIHByaW5jaXBhbFxuICAgICAgYXdhaXQgcHJpc21hLmNvbXBhbnkuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGNvbXBhbnkuaWQgfSB9KTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY3JpYXIgYmFuY28gZGUgZGFkb3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY3JpYXIgZW1wcmVzYTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gRnVuw6fDo28gcGFyYSBjcmlhciB1bSBub3ZvIHVzdcOhcmlvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcih7XG4gIG5hbWUsXG4gIGVtYWlsLFxuICBwYXNzd29yZCxcbiAgY29tcGFueUlkLFxuICByb2xlID0gJ3VzZXInLFxufToge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIGNvbXBhbnlJZDogc3RyaW5nO1xuICByb2xlPzogc3RyaW5nO1xufSkge1xuICAvLyBDcmlhciBvIHVzdcOhcmlvIG5vIGJhbmNvIGRlIGRhZG9zIHByaW5jaXBhbFxuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGNvbXBhbnlJZCxcbiAgICAgIHJvbGUsXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBjb21wYW55OiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIHRyeSB7XG4gICAgLy8gQ3JpYXIgbyB1c3XDoXJpbyB0YW1iw6ltIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbiAgICBjb25zdCBjbGllbnREYlVybCA9IGJ1aWxkQ2xpZW50RGF0YWJhc2VVcmwodXNlci5jb21wYW55KTtcbiAgICBjb25zdCBjbGllbnREYiA9IGdldENsaWVudFByaXNtYShjbGllbnREYlVybCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIE9idGVyIGEgZW1wcmVzYSBubyBiYW5jbyBkZSBkYWRvcyBkbyBjbGllbnRlIHVzYW5kbyBTUUwgcHVyb1xuICAgICAgY29uc3QgY2xpZW50Q29tcGFueSA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZywgbWFpbklkOiBzdHJpbmd9Pj5gXG4gICAgICAgIFNFTEVDVCAqIEZST00gXCJDbGllbnRDb21wYW55XCIgV0hFUkUgXCJtYWluSWRcIiA9ICR7Y29tcGFueUlkfSBMSU1JVCAxXG4gICAgICBgO1xuICAgICAgXG4gICAgICBpZiAoIWNsaWVudENvbXBhbnkgfHwgY2xpZW50Q29tcGFueS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRW1wcmVzYSBuw6NvIGVuY29udHJhZGEgbm8gYmFuY28gZGUgZGFkb3MgZG8gY2xpZW50ZScpO1xuICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0NyaWFuZG8gdXN1w6FyaW8gbm8gYmFuY28gZG8gY2xpZW50ZSBjb20gY29tcGFueUlkOicsIGNsaWVudENvbXBhbnlbMF0uaWQpO1xuICAgICAgXG4gICAgICAvLyBPYnRlciBvIHBlcmZpbCBkZSBhZG1pbmlzdHJhZG9yIHNlIG8gdXN1w6FyaW8gZm9yIGFkbWluXG4gICAgICBsZXQgcHJvZmlsZUlkID0gbnVsbDtcbiAgICAgIGlmIChyb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAgIGNvbnN0IGFkbWluUHJvZmlsZSA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgICBTRUxFQ1QgXCJpZFwiIEZST00gXCJQcm9maWxlXCIgV0hFUkUgXCJuYW1lXCIgPSAnQWRtaW5pc3RyYWRvcicgTElNSVQgMVxuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFkbWluUHJvZmlsZSAmJiBhZG1pblByb2ZpbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHByb2ZpbGVJZCA9IGFkbWluUHJvZmlsZVswXS5pZDtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUGVyZmlsIGRlIGFkbWluaXN0cmFkb3IgZW5jb250cmFkbzonLCBwcm9maWxlSWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdQZXJmaWwgZGUgYWRtaW5pc3RyYWRvciBuw6NvIGVuY29udHJhZG8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyBqw6EgZXhpc3RlIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGVcbiAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGNsaWVudERiLiRxdWVyeVJhdzxBcnJheTx7aWQ6IHN0cmluZ30+PmBcbiAgICAgICAgU0VMRUNUIFwiaWRcIiBGUk9NIFwiQ2xpZW50VXNlclwiIFdIRVJFIFwibWFpbklkXCIgPSAke3VzZXIuaWR9IExJTUlUIDFcbiAgICAgIGA7XG4gICAgICBcbiAgICAgIGlmIChleGlzdGluZ1VzZXIgJiYgZXhpc3RpbmdVc2VyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzdcOhcmlvIGrDoSBleGlzdGUgbm8gYmFuY28gZGUgZGFkb3MgZG8gY2xpZW50ZSwgYXR1YWxpemFuZG8uLi4nKTtcbiAgICAgICAgLy8gQXR1YWxpemFyIG8gdXN1w6FyaW8gY29tIG91IHNlbSBwZXJmaWxcbiAgICAgICAgaWYgKHByb2ZpbGVJZCkge1xuICAgICAgICAgIGF3YWl0IGNsaWVudERiLiRleGVjdXRlUmF3YFxuICAgICAgICAgICAgVVBEQVRFIFwiQ2xpZW50VXNlclwiIFxuICAgICAgICAgICAgU0VUIFwibmFtZVwiID0gJHt1c2VyLm5hbWV9LCBcbiAgICAgICAgICAgICAgICBcImVtYWlsXCIgPSAke3VzZXIuZW1haWx9LCBcbiAgICAgICAgICAgICAgICBcInByb2ZpbGVJZFwiID0gJHtwcm9maWxlSWR9Ojp1dWlkLCBcbiAgICAgICAgICAgICAgICBcInJvbGVcIiA9ICR7dXNlci5yb2xlfSwgXG4gICAgICAgICAgICAgICAgXCJ1cGRhdGVkQXRcIiA9ICR7bmV3IERhdGUoKX1cbiAgICAgICAgICAgIFdIRVJFIFwibWFpbklkXCIgPSAke3VzZXIuaWR9XG4gICAgICAgICAgYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgICAgIFVQREFURSBcIkNsaWVudFVzZXJcIiBcbiAgICAgICAgICAgIFNFVCBcIm5hbWVcIiA9ICR7dXNlci5uYW1lfSwgXG4gICAgICAgICAgICAgICAgXCJlbWFpbFwiID0gJHt1c2VyLmVtYWlsfSwgXG4gICAgICAgICAgICAgICAgXCJwcm9maWxlSWRcIiA9IE5VTEwsIFxuICAgICAgICAgICAgICAgIFwicm9sZVwiID0gJHt1c2VyLnJvbGV9LCBcbiAgICAgICAgICAgICAgICBcInVwZGF0ZWRBdFwiID0gJHtuZXcgRGF0ZSgpfVxuICAgICAgICAgICAgV0hFUkUgXCJtYWluSWRcIiA9ICR7dXNlci5pZH1cbiAgICAgICAgICBgO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnQ3JpYW5kbyBub3ZvIHVzdcOhcmlvIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGUuLi4nKTtcbiAgICAgICAgLy8gQ3JpYXIgbyB1c3XDoXJpbyBubyBiYW5jbyBkZSBkYWRvcyBkbyBjbGllbnRlIHVzYW5kbyBTUUwgcHVyb1xuICAgICAgICAvLyBDcmlhciBvIHVzdcOhcmlvIGNvbSBvdSBzZW0gcGVyZmlsXG4gICAgICAgIGlmIChwcm9maWxlSWQpIHtcbiAgICAgICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIFwiQ2xpZW50VXNlclwiIChcIm5hbWVcIiwgXCJlbWFpbFwiLCBcIm1haW5JZFwiLCBcImNvbXBhbnlJZFwiLCBcInByb2ZpbGVJZFwiLCBcInJvbGVcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgICAgIFZBTFVFUyAoXG4gICAgICAgICAgICAgICR7dXNlci5uYW1lfSwgXG4gICAgICAgICAgICAgICR7dXNlci5lbWFpbH0sIFxuICAgICAgICAgICAgICAke3VzZXIuaWR9LCBcbiAgICAgICAgICAgICAgJHtjbGllbnRDb21wYW55WzBdLmlkfTo6dXVpZCwgXG4gICAgICAgICAgICAgICR7cHJvZmlsZUlkfTo6dXVpZCwgXG4gICAgICAgICAgICAgICR7dXNlci5yb2xlfSwgXG4gICAgICAgICAgICAgIHRydWUsIFxuICAgICAgICAgICAgICAke25ldyBEYXRlKCl9XG4gICAgICAgICAgICApXG4gICAgICAgICAgYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBjbGllbnREYi4kZXhlY3V0ZVJhd2BcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIFwiQ2xpZW50VXNlclwiIChcIm5hbWVcIiwgXCJlbWFpbFwiLCBcIm1haW5JZFwiLCBcImNvbXBhbnlJZFwiLCBcInJvbGVcIiwgXCJhY3RpdmVcIiwgXCJ1cGRhdGVkQXRcIilcbiAgICAgICAgICAgIFZBTFVFUyAoXG4gICAgICAgICAgICAgICR7dXNlci5uYW1lfSwgXG4gICAgICAgICAgICAgICR7dXNlci5lbWFpbH0sIFxuICAgICAgICAgICAgICAke3VzZXIuaWR9LCBcbiAgICAgICAgICAgICAgJHtjbGllbnRDb21wYW55WzBdLmlkfTo6dXVpZCwgXG4gICAgICAgICAgICAgICR7dXNlci5yb2xlfSwgXG4gICAgICAgICAgICAgIHRydWUsIFxuICAgICAgICAgICAgICAke25ldyBEYXRlKCl9XG4gICAgICAgICAgICApXG4gICAgICAgICAgYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnVXN1w6FyaW8gY3JpYWRvL2F0dWFsaXphZG8gY29tIHN1Y2Vzc28gbm8gYmFuY28gZGUgZGFkb3MgZG8gY2xpZW50ZScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGNyaWFyL2F0dWFsaXphciB1c3XDoXJpbyBubyBiYW5jbyBkZSBkYWRvcyBkbyBjbGllbnRlOicsIGVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgY2xpZW50RGIuJGRpc2Nvbm5lY3QoKTtcbiAgICBcbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGNyaWFyIHVzdcOhcmlvIG5vIGJhbmNvIGRlIGRhZG9zIGRvIGNsaWVudGU6JywgZXJyb3IpO1xuICAgIC8vIE7Do28gdmFtb3MgZXhjbHVpciBvIHVzdcOhcmlvIGRvIGJhbmNvIHByaW5jaXBhbCBzZSBob3V2ZXIgZXJybyBubyBiYW5jbyBkbyBjbGllbnRlXG4gICAgLy8gSXNzbyBwb2RlIHNlciB0cmF0YWRvIHBvc3Rlcmlvcm1lbnRlXG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbn0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZXhlYyIsInByb21pc2lmeSIsImV4ZWNBc3luYyIsInByaXNtYSIsImdldENsaWVudFByaXNtYSIsImRhdGFiYXNlVXJsIiwiZGF0YXNvdXJjZXMiLCJkYiIsInVybCIsImJ1aWxkQ2xpZW50RGF0YWJhc2VVcmwiLCJjb21wYW55IiwiZW5jb2RlZFBhc3MiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkYXRhYmFzZVBhc3MiLCJkYXRhYmFzZVVzZXIiLCJkYXRhYmFzZUhvc3QiLCJkYXRhYmFzZVBvcnQiLCJkYXRhYmFzZU5hbWUiLCJnZXRDb21wYW55RGJDb25uZWN0aW9uIiwidXNlcklkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsIkVycm9yIiwiZGJVcmwiLCJjcmVhdGVDb21wYW55IiwibmFtZSIsImNyZWF0ZSIsImRhdGEiLCJwZ1VzZXIiLCJwcm9jZXNzIiwiZW52IiwiUE9TVEdSRVNfVVNFUiIsInBnUGFzcyIsIlBPU1RHUkVTX1BBU1NXT1JEIiwicGdIb3N0IiwiUE9TVEdSRVNfSE9TVCIsInBnUG9ydCIsIlBPU1RHUkVTX1BPUlQiLCJwYXJzZUludCIsImNvbnNvbGUiLCJsb2ciLCJwZ1VybCIsImNyZWF0ZURiQ29tbWFuZCIsIlBvb2wiLCJyZXF1aXJlIiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJxdWVyeSIsImVuZCIsImNsaWVudERiVXJsIiwiY2xpZW50RGIiLCIkZXhlY3V0ZVJhdyIsImNsaWVudENvbXBhbnlSZXN1bHQiLCIkcXVlcnlSYXciLCJEYXRlIiwiY2xpZW50Q29tcGFueUlkIiwiYWRtaW5Qcm9maWxlUmVzdWx0IiwiYWRtaW5Qcm9maWxlSWQiLCJkYXNoYm9hcmRSZXN1bHQiLCJ1c2Vyc1Jlc3VsdCIsInByb2ZpbGVzUmVzdWx0Iiwic2V0dGluZ3NSZXN1bHQiLCIkZGlzY29ubmVjdCIsImVycm9yIiwiZGVsZXRlIiwiY3JlYXRlVXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJjb21wYW55SWQiLCJyb2xlIiwiY2xpZW50Q29tcGFueSIsImxlbmd0aCIsInByb2ZpbGVJZCIsImFkbWluUHJvZmlsZSIsImV4aXN0aW5nVXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fmodules%2Froute&page=%2Fapi%2Fdashboard%2Fmodules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fmodules%2Froute.ts&appDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cnico%5CDesktop%5Cgestaoweb%5Cgestaowebprisma&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();